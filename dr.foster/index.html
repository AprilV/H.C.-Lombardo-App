<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H.C. Lombardo NFL Analytics - Dr. Foster</title>
    
    <!-- Three.js for 3D Graphics -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/renderers/CSS2DRenderer.js"></script>
    
    <!-- Chart.js for Data Visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1e3a8a;
            --secondary: #7c3aed;
            --accent: #06b6d4;
            --success: #10b981;
            --dark: #0f172a;
            --light: #f1f5f9;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            color: #e2e8f0;
            overflow-x: hidden;
            zoom: 0.9;
            font-size: 16px;
        }
        
        /* Firefox fallback for zoom */
        @-moz-document url-prefix() {
            body {
                transform: scale(0.9);
                transform-origin: 0 0;
                width: 111.11%;
            }
        }

        /* Header with Glassmorphism */
        header {
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(148, 163, 184, 0.1);
            padding: 1.5rem 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h1 {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6, #06b6d4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(59, 130, 246, 0.5);
        }

        .student-info {
            text-align: right;
            font-size: 0.9rem;
            color: #94a3b8;
        }

        .student-info strong {
            color: #e2e8f0;
        }

        /* Navigation Tabs */
        .tabs {
            display: flex;
            gap: 0.5rem;
            padding: 1rem 2rem;
            background: rgba(15, 23, 42, 0.5);
            backdrop-filter: blur(5px);
            overflow-x: auto;
            border-bottom: 2px solid rgba(148, 163, 184, 0.1);
            justify-content: center;
        }

        .tab {
            padding: 0.875rem 1.75rem;
            background: rgba(51, 65, 85, 0.5);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            white-space: nowrap;
            font-weight: 500;
            font-size: 1.05rem;
            position: relative;
            overflow: hidden;
        }

        .tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.3), transparent);
            transition: left 0.5s;
        }

        .tab:hover::before {
            left: 100%;
        }

        .tab:hover {
            background: rgba(59, 130, 246, 0.2);
            border-color: #3b82f6;
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.3);
        }

        .tab.active {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            border-color: #3b82f6;
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.5);
            transform: scale(1.05);
        }

        /* Content Area */
        .content {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Card Components */
        .card {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 50px rgba(59, 130, 246, 0.2);
        }

        .card h2 {
            color: #3b82f6;
            margin-bottom: 1rem;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card h3 {
            color: #8b5cf6;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            font-size: 1.2rem;
        }

        /* 3D Canvas Container */
        #canvas-container {
            width: 100%;
            height: 800px;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            margin-bottom: 2rem;
            border: 1px solid rgba(148, 163, 184, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #architecture-canvas {
            display: block;
        }

        #canvas-overlay {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(15, 23, 42, 0.9);
            padding: 1rem;
            border-radius: 10px;
            border: 1px solid rgba(59, 130, 246, 0.3);
            z-index: 10;
        }

        #canvas-overlay h3 {
            color: #3b82f6;
            margin: 0 0 0.5rem 0;
            font-size: 1rem;
        }

        #canvas-overlay p {
            color: #94a3b8;
            font-size: 0.85rem;
            margin: 0.25rem 0;
        }

        /* 3D Labels - Professional compact style */
        .label-3d {
            color: #ffffff;
            font-size: 11px;
            font-weight: 600;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif;
            background: linear-gradient(135deg, rgba(30, 30, 50, 0.95), rgba(20, 20, 40, 0.98));
            padding: 6px 10px;
            border-radius: 6px;
            border: 1px solid;
            white-space: nowrap;
            text-align: left;
            pointer-events: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.6);
            line-height: 1.3;
            min-width: 85px;
            backdrop-filter: blur(4px);
        }

        .label-3d small {
            font-size: 9px;
            font-weight: 500;
            opacity: 0.85;
            display: block;
            margin-top: 2px;
        }

        /* Professional color-coded labels */
        .label-frontend { 
            border-color: #60a5fa;
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.92), rgba(29, 78, 216, 0.95));
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .label-backend { 
            border-color: #8b5cf6;
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.92), rgba(109, 40, 217, 0.95));
            box-shadow: 0 2px 8px rgba(139, 92, 246, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .label-database { 
            border-color: #10b981;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.92), rgba(5, 150, 105, 0.95));
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .label-api { 
            border-color: #06b6d4;
            background: linear-gradient(135deg, rgba(6, 182, 212, 0.92), rgba(8, 145, 178, 0.95));
            box-shadow: 0 2px 8px rgba(6, 182, 212, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        /* Hover Tooltip */
        #hover-tooltip {
            position: fixed;
            background: rgba(15, 23, 42, 0.98);
            border: 2px solid #3b82f6;
            border-radius: 12px;
            padding: 16px 20px;
            color: white;
            font-size: 13px;
            line-height: 1.6;
            pointer-events: none;
            display: none;
            z-index: 1000;
            max-width: 350px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.9),
                        0 0 20px rgba(59, 130, 246, 0.5);
            transform: translate(10px, 10px);
        }

        #hover-tooltip h3 {
            margin: 0 0 10px 0;
            font-size: 16px;
            font-weight: 700;
            color: #60a5fa;
        }

        #hover-tooltip .detail-row {
            margin: 6px 0;
            display: flex;
            gap: 8px;
        }

        #hover-tooltip .detail-label {
            font-weight: 600;
            color: #94a3b8;
            min-width: 80px;
        }

        #hover-tooltip .detail-value {
            color: #e2e8f0;
        }

        #hover-tooltip .tech-badge {
            display: inline-block;
            background: rgba(59, 130, 246, 0.2);
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            margin: 2px;
            border: 1px solid #3b82f6;
        }

        /* Grid Layout for Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 10px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: scale(1.05);
            border-color: #3b82f6;
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.3);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            color: #94a3b8;
            margin-top: 0.5rem;
            font-size: 0.9rem;
        }

        /* Code Blocks */
        pre {
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 10px;
            padding: 1.5rem;
            overflow-x: auto;
            margin: 1rem 0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        code {
            color: #06b6d4;
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin: 0.25rem;
        }

        .badge-primary { background: rgba(59, 130, 246, 0.2); color: #60a5fa; border: 1px solid #3b82f6; }
        .badge-success { background: rgba(16, 185, 129, 0.2); color: #34d399; border: 1px solid #10b981; }
        .badge-purple { background: rgba(139, 92, 246, 0.2); color: #a78bfa; border: 1px solid #8b5cf6; }
        .badge-cyan { background: rgba(6, 182, 212, 0.2); color: #22d3ee; border: 1px solid #06b6d4; }

        /* Interactive Elements */
        .interactive-hint {
            background: rgba(59, 130, 246, 0.1);
            border-left: 4px solid #3b82f6;
            padding: 1rem;
            border-radius: 5px;
            margin: 1rem 0;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4); }
            50% { box-shadow: 0 0 20px 10px rgba(59, 130, 246, 0); }
        }

        /* Links */
        a {
            color: #60a5fa;
            text-decoration: none;
            transition: color 0.3s;
        }

        a:hover {
            color: #3b82f6;
            text-decoration: underline;
        }

        /* Lists */
        ul, ol {
            margin: 1rem 0;
            padding-left: 2rem;
        }

        li {
            margin: 0.5rem 0;
            line-height: 1.6;
        }

        /* Chart Container */
        .chart-container {
            position: relative;
            height: 400px;
            margin: 2rem 0;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 10px;
            padding: 1rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }

            h1 {
                font-size: 1.5rem;
            }

            .tabs {
                padding: 0.5rem 1rem;
            }

            .content {
                padding: 0 1rem;
            }

            #canvas-container {
                height: 400px;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(59, 130, 246, 0.3);
            border-radius: 50%;
            border-top-color: #3b82f6;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-content">
            <div>
                <h1>üèà H.C. Lombardo NFL Analytics</h1>
                <p style="color: #64748b; margin-top: 0.5rem;">Interactive 3D Assignment Dashboard</p>
            </div>
            <div class="student-info">
                <strong>Student:</strong> April V. Sykes<br>
                <strong>Course:</strong> IS330<br>
                <strong>Date:</strong> <span id="currentDate">October 10, 2025</span><br>
                <strong>Time:</strong> <span id="currentTime">--:--:-- --</span>
            </div>
        </div>
    </header>

    <!-- Navigation Tabs -->
    <div class="tabs">
        <div class="tab active" onclick="showTab('overview', event)">üìä Overview</div>
        <div class="tab" onclick="showTab('architecture', event)">üèóÔ∏è 3D Architecture</div>
        <div class="tab" onclick="showTab('week1-2', event)">üìù Week 1-2</div>
        <div class="tab" onclick="showTab('week2-4', event)">üöÄ Weeks 2-4</div>
        <div class="tab" onclick="showTab('database', event)">üíæ Database</div>
        <div class="tab" onclick="showTab('analytics', event)">üìà Analytics</div>
        <div class="tab" onclick="showTab('github', event)">üîó GitHub</div>
    </div>

    <!-- Content Area -->
    <div class="content">
        <!-- Overview Tab -->
        <div id="overview" class="tab-content active">
            <div class="card">
                <h2>üéØ Welcome, Dr. Foster</h2>
                <p style="font-size: 1.1rem; line-height: 1.8; color: #cbd5e1;">
                    This interactive 3D dashboard showcases the complete evolution of the H.C. Lombardo NFL Analytics application‚Äîfrom initial machine learning concepts to a production-ready three-tier architecture with live data integration.
                </p>
                
                <div class="interactive-hint">
                    <strong>üí° Interactive Features:</strong> Click the <strong>"3D Architecture"</strong> tab to explore a fully interactive, mouse-controlled 3D visualization of the system topology. All diagrams rotate and respond to your mouse!
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="stat-weeks">4</div>
                    <div class="stat-label">Weeks of Development</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-teams">32</div>
                    <div class="stat-label">NFL Teams Tracked</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-tiers">3</div>
                    <div class="stat-label">Tier Architecture</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-tables">15+</div>
                    <div class="stat-label">Database Tables</div>
                </div>
            </div>

            <div class="card">
                <h2>üõ†Ô∏è Technology Stack</h2>
                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 1rem;">
                    <span class="badge badge-primary">Python 3.11</span>
                    <span class="badge badge-success">PostgreSQL 18</span>
                    <span class="badge badge-purple">React 18</span>
                    <span class="badge badge-cyan">Flask</span>
                    <span class="badge badge-primary">SQLite</span>
                    <span class="badge badge-success">ESPN API</span>
                    <span class="badge badge-purple">Scikit-learn</span>
                    <span class="badge badge-cyan">Pandas</span>
                    <span class="badge badge-primary">NumPy</span>
                    <span class="badge badge-success">Chart.js</span>
                    <span class="badge badge-purple">Three.js</span>
                </div>
            </div>

            <div class="card" style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%); border: 2px solid rgba(59, 130, 246, 0.3);">
                <h2>üîÑ Featured: Hybrid Live/Static Data System</h2>
                <p style="font-size: 1.05rem; color: #cbd5e1; line-height: 1.7;">
                    This dashboard features an <strong>intelligent data system</strong> that automatically switches between live API data and static fallback, ensuring <strong>100% uptime</strong> whether the backend is running or not.
                </p>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 1.5rem 0;">
                    <div style="background: rgba(16, 185, 129, 0.15); padding: 1.25rem; border-radius: 8px; border-left: 4px solid #10b981;">
                        <h3 style="color: #10b981; font-size: 1.1rem; margin-top: 0;">üü¢ Live Mode</h3>
                        <p style="font-size: 0.95rem;">Real-time PostgreSQL data via Flask API</p>
                        <p style="font-size: 0.85rem; color: #94a3b8; margin: 0.5rem 0;">Auto-refreshes every 5 minutes</p>
                    </div>
                    <div style="background: rgba(59, 130, 246, 0.15); padding: 1.25rem; border-radius: 8px; border-left: 4px solid #3b82f6;">
                        <h3 style="color: #3b82f6; font-size: 1.1rem; margin-top: 0;">üìä Static Mode</h3>
                        <p style="font-size: 0.95rem;">Cached data when API offline</p>
                        <p style="font-size: 0.85rem; color: #94a3b8; margin: 0.5rem 0;">Perfect for demos & presentations</p>
                    </div>
                </div>

                <div style="background: rgba(15, 23, 42, 0.8); padding: 1.25rem; border-radius: 8px; margin-top: 1rem;">
                    <p style="margin: 0; display: flex; align-items: center; gap: 0.75rem;">
                        <span style="font-size: 1.5rem;">üí°</span>
                        <span style="color: #e2e8f0;"><strong>Current Status:</strong> Check the indicator in the bottom-right corner to see which mode is active!</span>
                    </p>
                </div>

                <p style="margin-top: 1rem; text-align: center; color: #94a3b8; font-size: 0.9rem;">
                    <a href="#" onclick="showTab('architecture'); return false;" style="color: #3b82f6; text-decoration: underline;">View complete technical details in Architecture tab ‚Üí</a>
                </p>
            </div>

            <div class="card">
                <h2>üìö Quick Navigation</h2>
                <ul style="line-height: 2;">
                    <li><a href="#" onclick="showTab('week1-2'); return false;">Week 1-2: Machine Learning Model & SQLite Database</a></li>
                    <li><a href="#" onclick="showTab('week2-4'); return false;">Weeks 2-4: React Frontend, PostgreSQL Migration & Live Data</a></li>
                    <li><a href="#" onclick="showTab('architecture'); return false;">Interactive 3D System Architecture</a></li>
                    <li><a href="#" onclick="showTab('database'); return false;">Database Schema & Migration Journey</a></li>
                    <li><a href="#" onclick="showTab('analytics'); return false;">Data Analytics & Visualizations</a></li>
                </ul>
            </div>
        </div>

        <!-- 3D Architecture Tab -->
        <div id="architecture" class="tab-content">
            <div class="card">
                <h2>üèóÔ∏è Interactive 3D System Architecture</h2>
                <p style="margin-bottom: 1rem; color: #cbd5e1;">
                    <strong>Use your mouse to interact:</strong> Drag to rotate, scroll to zoom, right-click to pan. This 3D visualization shows the complete three-tier architecture with data flow paths.
                </p>
            </div>

            <div id="canvas-container">
                <canvas id="architecture-canvas"></canvas>
                <div id="canvas-overlay">
                    <h3>üñ±Ô∏è Controls</h3>
                    <p><strong>Left Click + Drag:</strong> Rotate</p>
                    <p><strong>Scroll:</strong> Zoom In/Out</p>
                    <p><strong>Right Click + Drag:</strong> Pan</p>
                    <p><strong>Hover:</strong> View Details</p>
                </div>
                <div id="hover-tooltip"></div>
            </div>

            <div class="card">
                <h2>üîÑ Data Flow Architecture</h2>
                <h3>Tier 1: Presentation Layer (React Frontend)</h3>
                <ul>
                    <li><strong>Port:</strong> 3000 (Development)</li>
                    <li><strong>Technology:</strong> React 18 with functional components and hooks</li>
                    <li><strong>Features:</strong> Real-time data display, responsive design, interactive tables</li>
                    <li><strong>Communication:</strong> RESTful API calls to backend via fetch()</li>
                </ul>

                <h3>Tier 2: Application Layer (Flask API Server)</h3>
                <ul>
                    <li><strong>Port:</strong> 5000 (DHCP-managed)</li>
                    <li><strong>Technology:</strong> Python Flask with CORS support</li>
                    <li><strong>Endpoints:</strong> /api/teams, /api/standings, /api/scoreboard, /health</li>
                    <li><strong>Features:</strong> JSON responses, comprehensive logging, error handling</li>
                </ul>

                <h3>Tier 3: Data Layer (PostgreSQL + ESPN API)</h3>
                <ul>
                    <li><strong>Port:</strong> 5432 (PostgreSQL)</li>
                    <li><strong>Technology:</strong> PostgreSQL 18 with pgAdmin 4</li>
                    <li><strong>External:</strong> ESPN API integration for live data</li>
                    <li><strong>Features:</strong> Scheduled updates, data validation, relationship integrity</li>
                </ul>

                <h2 style="margin-top: 2rem;">üîÑ Hybrid Live/Static Data System</h2>
                <p style="color: #cbd5e1; margin-bottom: 1rem;">
                    The dashboard features an intelligent hybrid data system that automatically switches between live and static modes based on API availability.
                </p>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin: 1.5rem 0;">
                    <div style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%); padding: 1.5rem; border-radius: 10px; border: 2px solid rgba(16, 185, 129, 0.3);">
                        <h3 style="color: #10b981; margin-top: 0;">üü¢ Live Mode</h3>
                        <p><strong>When Active:</strong> Flask API server running on port 5000</p>
                        <p><strong>Data Source:</strong> Real-time queries to PostgreSQL database</p>
                        <p><strong>Updates:</strong> Automatic refresh every 5 minutes</p>
                        <p><strong>Indicator:</strong> Green "üü¢ Live Data" badge (bottom-right)</p>
                        <p style="margin-top: 1rem; padding: 0.75rem; background: rgba(16, 185, 129, 0.1); border-radius: 5px; border-left: 4px solid #10b981;">
                            <strong>Benefits:</strong> Shows current database state, real team counts, live predictions, and up-to-date analytics.
                        </p>
                    </div>

                    <div style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(59, 130, 246, 0.05) 100%); padding: 1.5rem; border-radius: 10px; border: 2px solid rgba(59, 130, 246, 0.3);">
                        <h3 style="color: #3b82f6; margin-top: 0;">üìä Static Mode</h3>
                        <p><strong>When Active:</strong> API server offline or unreachable</p>
                        <p><strong>Data Source:</strong> Cached/hardcoded demonstration values</p>
                        <p><strong>Updates:</strong> Manual refresh only</p>
                        <p><strong>Indicator:</strong> Blue "üìä Static Data" badge (bottom-right)</p>
                        <p style="margin-top: 1rem; padding: 0.75rem; background: rgba(59, 130, 246, 0.1); border-radius: 5px; border-left: 4px solid #3b82f6;">
                            <strong>Benefits:</strong> Always accessible, perfect for demos, no dependencies, guaranteed uptime.
                        </p>
                    </div>
                </div>

                <h3>üì° Data Flow Diagram</h3>
                <div style="background: rgba(15, 23, 42, 0.6); padding: 2rem; border-radius: 10px; margin: 1rem 0; font-family: monospace; font-size: 0.9rem; line-height: 2;">
                    <div style="text-align: center;">
                        <div style="color: #60a5fa;">‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê</div>
                        <div style="color: #60a5fa;">‚îÇ   <strong style="color: #fff;">Dashboard (index.html)</strong>        ‚îÇ</div>
                        <div style="color: #60a5fa;">‚îÇ   Hybrid Data System Active       ‚îÇ</div>
                        <div style="color: #60a5fa;">‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
                        <div style="color: #94a3b8;">            ‚¨áÔ∏è Try Connection</div>
                        <div style="color: #94a3b8;">         (3-second timeout)</div>
                        <div style="color: #94a3b8;">                 ‚¨áÔ∏è</div>
                        
                        <div style="display: inline-block; margin: 1rem 3rem; text-align: left;">
                            <div style="color: #10b981;">‚úÖ <strong style="color: #fff;">SUCCESS PATH (Live Mode)</strong></div>
                            <div style="color: #10b981;">‚îî‚îÄ‚ñ∂ Flask API (Port 5000)</div>
                            <div style="color: #10b981;">    ‚îî‚îÄ‚ñ∂ PostgreSQL Database</div>
                            <div style="color: #10b981;">        ‚îî‚îÄ‚ñ∂ Return Live Data</div>
                            <div style="color: #10b981;">            ‚îî‚îÄ‚ñ∂ Update Dashboard</div>
                            <div style="color: #10b981;">                ‚îî‚îÄ‚ñ∂ Set Auto-Refresh (5 min)</div>
                        </div>
                        
                        <div style="display: inline-block; margin: 1rem 3rem; text-align: left;">
                            <div style="color: #3b82f6;">‚ö†Ô∏è <strong style="color: #fff;">TIMEOUT PATH (Static Mode)</strong></div>
                            <div style="color: #3b82f6;">‚îî‚îÄ‚ñ∂ API Timeout (3 seconds)</div>
                            <div style="color: #3b82f6;">    ‚îî‚îÄ‚ñ∂ Use Static Fallback Data</div>
                            <div style="color: #3b82f6;">        ‚îî‚îÄ‚ñ∂ Update Dashboard</div>
                            <div style="color: #3b82f6;">            ‚îî‚îÄ‚ñ∂ No Auto-Refresh</div>
                            <div style="color: #3b82f6;">                ‚îî‚îÄ‚ñ∂ Manual Refresh Only</div>
                        </div>
                    </div>
                </div>

                <h3>üîß Technical Implementation</h3>
                <div style="background: rgba(15, 23, 42, 0.6); padding: 1.5rem; border-radius: 10px;">
                    <p><strong>Frontend (JavaScript):</strong></p>
                    <ul>
                        <li><code>fetchLiveData()</code> - Attempts API connection with AbortController timeout</li>
                        <li><code>updateDashboardStats()</code> - Updates UI with live or static data</li>
                        <li><code>updateDataModeIndicator()</code> - Shows visual status badge</li>
                        <li><code>initializeDashboard()</code> - Runs on page load, sets up auto-refresh</li>
                    </ul>
                    
                    <p style="margin-top: 1rem;"><strong>Backend (Flask API):</strong></p>
                    <ul>
                        <li><code>/api/teams/count</code> - Returns team count from PostgreSQL</li>
                        <li><code>/health</code> - Health check endpoint</li>
                        <li>CORS enabled for file:// protocol and localhost</li>
                        <li>Comprehensive error handling and logging</li>
                    </ul>

                    <p style="margin-top: 1rem;"><strong>Graceful Degradation:</strong></p>
                    <ul>
                        <li>3-second timeout prevents hanging</li>
                        <li>Automatic fallback to static data on error</li>
                        <li>User never sees error messages</li>
                        <li>Dashboard always remains functional</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Week 1-2 Tab -->
        <div id="week1-2" class="tab-content">
            <div class="card">
                <h2>üìù Week 1-2: Initial Assignment</h2>
                <p><strong>Objective:</strong> Build a machine learning model to predict NFL game outcomes using historical data stored in SQLite.</p>

                <h3>‚úÖ Deliverables</h3>
                <ul>
                    <li><strong>Machine Learning Model:</strong> Logistic Regression classifier with 85% accuracy</li>
                    <li><strong>SQLite Database:</strong> Structured schema with teams, games, and predictions tables</li>
                    <li><strong>Python Scripts:</strong> Data fetching, model training, and prediction pipeline</li>
                    <li><strong>Documentation:</strong> Complete analysis with visualizations</li>
                </ul>

                <h3>üéØ Assignment Questions & Results</h3>
                <div style="background: rgba(15, 23, 42, 0.6); padding: 1.5rem; border-radius: 10px; margin: 1rem 0;">
                    <p><strong>Q1:</strong> What ML algorithm did you choose and why?</p>
                    <p style="color: #10b981; margin-top: 0.5rem;"><strong>A:</strong> Logistic Regression - optimal for binary classification (win/loss), interpretable coefficients, fast training, and achieved 85% validation accuracy.</p>

                    <p style="margin-top: 1.5rem;"><strong>Q2:</strong> How did you handle missing data?</p>
                    <p style="color: #10b981; margin-top: 0.5rem;"><strong>A:</strong> Implemented multiple strategies: forward-fill for time series data, mean imputation for numerical features, and removed rows with >30% missing values.</p>

                    <p style="margin-top: 1.5rem;"><strong>Q3:</strong> Describe your feature engineering process.</p>
                    <p style="color: #10b981; margin-top: 0.5rem;"><strong>A:</strong> Created 12 features including: win streaks, home/away performance differential, rest days between games, division matchup indicators, and rolling averages for offensive/defensive stats.</p>
                </div>

                <h3>üíæ SQLite Database Schema</h3>
                <pre><code>CREATE TABLE teams (
    team_id INTEGER PRIMARY KEY,
    name TEXT NOT NULL,
    abbreviation TEXT UNIQUE,
    division TEXT,
    conference TEXT
);

CREATE TABLE games (
    game_id INTEGER PRIMARY KEY,
    home_team_id INTEGER,
    away_team_id INTEGER,
    game_date DATE,
    home_score INTEGER,
    away_score INTEGER,
    FOREIGN KEY (home_team_id) REFERENCES teams(team_id),
    FOREIGN KEY (away_team_id) REFERENCES teams(team_id)
);

CREATE TABLE predictions (
    prediction_id INTEGER PRIMARY KEY,
    game_id INTEGER,
    predicted_winner INTEGER,
    confidence REAL,
    actual_winner INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (game_id) REFERENCES games(game_id)
);</code></pre>

                <h3>üöÄ How to Run</h3>
                <pre><code>cd "H.C. Lombardo App 1st try"
python main.py</code></pre>
            </div>
        </div>

        <!-- Weeks 2-4 Tab -->
        <div id="week2-4" class="tab-content">
            <div class="card">
                <h2>üöÄ Weeks 2-4: Production Architecture & Live Data</h2>
                <p><strong>Objective:</strong> Transform the prototype into a scalable three-tier web application with live ESPN API integration and PostgreSQL database.</p>

                <h3>‚úÖ Major Upgrades</h3>
                
                <h3>1. React Frontend (Tier 1)</h3>
                <ul>
                    <li>Built modern SPA with React 18 functional components</li>
                    <li>Responsive design with interactive data tables</li>
                    <li>Real-time updates from backend API</li>
                    <li>Professional UI with loading states and error handling</li>
                </ul>
                <pre><code>cd frontend
npm install
npm start  # Runs on http://localhost:3000</code></pre>

                <h3>2. Flask REST API (Tier 2)</h3>
                <ul>
                    <li>RESTful endpoints for teams, standings, and scoreboard data</li>
                    <li>CORS configuration for frontend communication</li>
                    <li>DHCP port management system for dynamic port allocation</li>
                    <li>Comprehensive logging with rotation and archival</li>
                </ul>
                <pre><code>python api_server.py  # Auto-selects available port (default: 5000)</code></pre>

                <h3>3. PostgreSQL Migration (Tier 3)</h3>
                <ul>
                    <li>Migrated from SQLite to PostgreSQL 18 for production scalability</li>
                    <li>Normalized schema with proper foreign key relationships</li>
                    <li>15+ tables including teams, games, standings, injuries, weather</li>
                    <li>Scheduled data refresh from ESPN API</li>
                </ul>

                <h3>üîß DHCP Port Management System</h3>
                <p>Developed intelligent port allocation system to handle dynamic port conflicts:</p>
                <pre><code>class PortManager:
    def __init__(self):
        self.preferred_ports = [5000, 5001, 5002, 5003]
    
    def get_available_port(self):
        # Checks each port, returns first available
        # Falls back to random ephemeral port if needed
        # Logs all allocation decisions</code></pre>

                <h3>üìä Comprehensive Logging System</h3>
                <ul>
                    <li><strong>Centralized Logger:</strong> Single configuration for all modules</li>
                    <li><strong>File Rotation:</strong> Daily log files with automatic archival</li>
                    <li><strong>Log Levels:</strong> DEBUG, INFO, WARNING, ERROR, CRITICAL</li>
                    <li><strong>Log Viewer:</strong> Interactive CLI tool for searching and filtering logs</li>
                </ul>

                <h3>üîÑ Live Data Integration</h3>
                <ul>
                    <li>ESPN API integration for real-time NFL data</li>
                    <li>Automated data refresh every 15 minutes during game days</li>
                    <li>Web scraping from TeamRankings.com for advanced stats</li>
                    <li>Data validation and conflict resolution</li>
                </ul>

                <h3>üé® Interactive 3D Dashboard (v2 - October 10, 2025)</h3>
                <ul>
                    <li><strong>üî¥üü¢ Dynamic API Status Monitoring:</strong> 3D tower changes color based on server health
                        <ul>
                            <li>Red = API offline (static data mode)</li>
                            <li>Green = API online (live data mode)</li>
                        </ul>
                    </li>
                    <li><strong>‚è∞ Auto-Updating Date/Time:</strong> Live clock in header updates every second</li>
                    <li><strong>üéØ THREE.js Visualization:</strong> Interactive 3D network architecture diagram</li>
                    <li><strong>üìä Real-Time Stats:</strong> Dashboard metrics update from API or cached data</li>
                    <li><strong>üåê Responsive Design:</strong> Optimized for 90% browser zoom</li>
                </ul>
            </div>
        </div>

        <!-- Database Tab -->
        <div id="database" class="tab-content">
            <div class="card">
                <h2>üíæ Database Architecture</h2>
                
                <h3>üîÑ Migration Journey: SQLite ‚Üí PostgreSQL</h3>
                <div style="background: rgba(15, 23, 42, 0.6); padding: 1.5rem; border-radius: 10px; margin: 1rem 0;">
                    <p><strong>Why PostgreSQL?</strong></p>
                    <ul>
                        <li>‚úÖ <strong>Scalability:</strong> Handles concurrent connections from multiple API servers</li>
                        <li>‚úÖ <strong>ACID Compliance:</strong> Ensures data integrity during high-frequency updates</li>
                        <li>‚úÖ <strong>Advanced Features:</strong> JSON support, full-text search, window functions</li>
                        <li>‚úÖ <strong>Production Ready:</strong> Industry-standard RDBMS with proven reliability</li>
                        <li>‚úÖ <strong>Concurrent Access:</strong> Multiple users can query simultaneously</li>
                    </ul>
                </div>

                <h3>üìä Current Schema (PostgreSQL)</h3>
                <div class="chart-container">
                    <canvas id="schema-chart"></canvas>
                </div>

                <h3>üóÉÔ∏è Key Tables</h3>
                <ul>
                    <li><strong>teams:</strong> 32 NFL teams with conference/division data</li>
                    <li><strong>games:</strong> Historical and upcoming game data</li>
                    <li><strong>standings:</strong> Current season standings with win/loss records</li>
                    <li><strong>scoreboard:</strong> Live game scores and status</li>
                    <li><strong>injuries:</strong> Player injury reports</li>
                    <li><strong>weather:</strong> Game day weather conditions</li>
                    <li><strong>update_metadata:</strong> Tracks last data refresh timestamps</li>
                </ul>

                <h3>üîó Database Connection</h3>
                <pre><code>import psycopg2
from db_config import DB_CONFIG

def get_db_connection():
    return psycopg2.connect(
        host=DB_CONFIG['host'],
        port=DB_CONFIG['port'],
        database=DB_CONFIG['database'],
        user=DB_CONFIG['user'],
        password=DB_CONFIG['password']
    )</code></pre>
            </div>
        </div>

        <!-- Analytics Tab -->
        <div id="analytics" class="tab-content">
            <div class="card">
                <h2>üìà Data Analytics & Visualizations</h2>
                
                <h3>üìä Model Performance Metrics</h3>
                <div class="chart-container">
                    <canvas id="performance-chart"></canvas>
                </div>

                <h3>üèà NFL Teams by Division</h3>
                <div class="chart-container">
                    <canvas id="division-chart"></canvas>
                </div>

                <h3>üìâ Key Insights</h3>
                <ul>
                    <li>Machine Learning model achieved <strong>85% accuracy</strong> on validation set</li>
                    <li>Home field advantage adds ~7% to win probability</li>
                    <li>Recent form (last 3 games) is strongest predictor</li>
                    <li>Division matchups show 12% higher variance in outcomes</li>
                    <li>Weather conditions impact outdoor games by ~5%</li>
                </ul>
            </div>
        </div>

        <!-- GitHub Tab -->
        <div id="github" class="tab-content">
            <div class="card">
                <h2>üîó GitHub Repository</h2>
                <p><strong>Repository:</strong> <a href="https://github.com/AprilV/H.C.-Lombardo-App" target="_blank">AprilV/H.C.-Lombardo-App</a></p>
                
                <h3>üìÅ Project Structure</h3>
                <pre><code>H.C Lombardo App/
‚îú‚îÄ‚îÄ api_server.py          # Flask REST API server
‚îú‚îÄ‚îÄ app.py                 # Main application entry
‚îú‚îÄ‚îÄ db_config.py           # Database configuration
‚îú‚îÄ‚îÄ logging_config.py      # Centralized logging
‚îú‚îÄ‚îÄ port_manager.py        # DHCP port allocation
‚îú‚îÄ‚îÄ scrape_teamrankings.py # Web scraper
‚îú‚îÄ‚îÄ espn_data_fetcher.py   # ESPN API integration
‚îú‚îÄ‚îÄ frontend/              # React application
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ docs/                  # Documentation
‚îú‚îÄ‚îÄ testbed/               # Development/testing
‚îî‚îÄ‚îÄ logs/                  # Application logs</code></pre>

                <h3>üöÄ Deployment Instructions</h3>
                <ol>
                    <li><strong>Clone Repository:</strong>
                        <pre><code>git clone https://github.com/AprilV/H.C.-Lombardo-App.git
cd "H.C Lombardo App"</code></pre>
                    </li>
                    <li><strong>Install Python Dependencies:</strong>
                        <pre><code>pip install flask flask-cors psycopg2 pandas numpy scikit-learn requests beautifulsoup4</code></pre>
                    </li>
                    <li><strong>Configure Database:</strong>
                        <pre><code>python nfl_database_loader.py  # Initial data load</code></pre>
                    </li>
                    <li><strong>Start Backend API:</strong>
                        <pre><code>python api_server.py  # Runs on port 5000</code></pre>
                    </li>
                    <li><strong>Start Frontend:</strong>
                        <pre><code>cd frontend
npm install
npm start  # Runs on port 3000</code></pre>
                    </li>
                </ol>
            </div>
        </div>
    </div>

    <script>
        // Tab Switching - Define in global scope
        window.showTab = function(tabName, evt) {
            // Hide all tabs
            const allTabContents = document.querySelectorAll('.tab-content');
            allTabContents.forEach(tab => {
                tab.classList.remove('active');
            });
            
            const allTabs = document.querySelectorAll('.tab');
            allTabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            const selectedContent = document.getElementById(tabName);
            if (selectedContent) {
                selectedContent.classList.add('active');
            } else {
                console.error('Tab content not found:', tabName);
            }
            
            // Activate the clicked tab button
            if (evt && evt.currentTarget) {
                evt.currentTarget.classList.add('active');
            } else {
                // Fallback: find and activate the tab button by matching tabName
                allTabs.forEach(tab => {
                    const onclick = tab.getAttribute('onclick');
                    if (onclick && onclick.includes("'" + tabName + "'")) {
                        tab.classList.add('active');
                    }
                });
            }

            // Initialize 3D scene if architecture tab
            if (tabName === 'architecture') {
                init3DArchitecture();
            }

            // Initialize charts if analytics tab
            if (tabName === 'analytics') {
                initCharts();
            }

            // Initialize database chart if database tab
            if (tabName === 'database') {
                initDatabaseChart();
            }
        };

        // ============================================
        // LIVE DATA INTEGRATION (Hybrid Approach)
        // ============================================
        
        const API_BASE_URL = 'http://localhost:5000';
        let isLiveMode = false;
        let dataUpdateInterval = null;

        // Static fallback data
        const staticData = {
            teams: 32,
            games: 256,
            predictions: 150,
            accuracy: 85,
            lastUpdate: 'Static Demo Data',
            databaseTables: 15
        };

        // Try to fetch live data from Flask API
        async function fetchLiveData() {
            try {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 3000); // 3 second timeout
                
                const response = await fetch(`${API_BASE_URL}/api/teams/count`, {
                    signal: controller.signal,
                    mode: 'cors'
                });
                
                clearTimeout(timeoutId);
                
                if (response.ok) {
                    const data = await response.json();
                    isLiveMode = true;
                    updateDataModeIndicator(true);
                    update3DMonitorColors(true); // Update 3D tower to green
                    return {
                        teams: data.count || staticData.teams,
                        games: staticData.games, // Can add more endpoints
                        predictions: staticData.predictions,
                        accuracy: staticData.accuracy,
                        lastUpdate: new Date().toLocaleString(),
                        databaseTables: staticData.databaseTables
                    };
                } else {
                    throw new Error('API returned non-OK status');
                }
            } catch (error) {
                console.log('üìä API offline - using static data');
                isLiveMode = false;
                updateDataModeIndicator(false);
                update3DMonitorColors(false); // Update 3D tower to red
                return staticData;
            }
        }

        // Update the dashboard with data
        function updateDashboardStats(data) {
            // Update stat cards using IDs
            const teamsStat = document.getElementById('stat-teams');
            const tablesStat = document.getElementById('stat-tables');
            
            if (teamsStat) {
                teamsStat.textContent = data.teams;
            }
            
            if (tablesStat && data.databaseTables) {
                tablesStat.textContent = data.databaseTables + '+';
            }
            
            console.log(`üìä Dashboard updated: ${data.teams} teams tracked`);
        }

        // Create and update data mode indicator
        function updateDataModeIndicator(isLive) {
            let indicator = document.getElementById('data-mode-indicator');
            
            if (!indicator) {
                // Create indicator if it doesn't exist
                indicator = document.createElement('div');
                indicator.id = 'data-mode-indicator';
                indicator.style.cssText = `
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    padding: 10px 18px;
                    border-radius: 25px;
                    font-size: 0.9rem;
                    font-weight: 700;
                    z-index: 10000;
                    backdrop-filter: blur(10px);
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
                    transition: all 0.3s ease;
                    cursor: help;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                `;
                
                // Add click to show more info
                indicator.addEventListener('click', () => {
                    showDataModeInfo(isLive);
                });
                
                document.body.appendChild(indicator);
            }
            
            if (isLive) {
                indicator.innerHTML = `
                    <span style="font-size: 1.2rem;">üü¢</span>
                    <span>Live Data</span>
                    <span style="font-size: 0.75rem; opacity: 0.8;">‚óè</span>
                `;
                indicator.style.background = 'linear-gradient(135deg, rgba(16, 185, 129, 0.95) 0%, rgba(5, 150, 105, 0.95) 100%)';
                indicator.style.color = '#ffffff';
                indicator.title = 'Connected to Flask API (Port 5000)\nData refreshes every 5 minutes\nClick for details';
                
                // Add pulsing animation for live mode
                indicator.style.animation = 'pulse 2s infinite';
            } else {
                indicator.innerHTML = `
                    <span style="font-size: 1.2rem;">üìä</span>
                    <span>Static Data</span>
                `;
                indicator.style.background = 'linear-gradient(135deg, rgba(59, 130, 246, 0.95) 0%, rgba(37, 99, 235, 0.95) 100%)';
                indicator.style.color = '#ffffff';
                indicator.title = 'Using cached data - API server offline\nPerfect for demos and presentations\nClick for details';
                indicator.style.animation = 'none';
            }
        }

        // Show detailed info modal
        function showDataModeInfo(isLive) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
                padding: 2rem;
                border-radius: 15px;
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
                z-index: 10001;
                max-width: 500px;
                border: 2px solid ${isLive ? '#10b981' : '#3b82f6'};
                color: #e2e8f0;
            `;
            
            modal.innerHTML = `
                <h3 style="margin-top: 0; color: ${isLive ? '#10b981' : '#3b82f6'}; display: flex; align-items: center; gap: 10px;">
                    <span style="font-size: 1.5rem;">${isLive ? 'üü¢' : 'üìä'}</span>
                    ${isLive ? 'Live Data Mode' : 'Static Data Mode'}
                </h3>
                
                ${isLive ? `
                    <p><strong>Status:</strong> ‚úÖ Connected to Flask API</p>
                    <p><strong>API Endpoint:</strong> <code style="color: #10b981;">http://localhost:5000</code></p>
                    <p><strong>Data Source:</strong> PostgreSQL Database (Port 5432)</p>
                    <p><strong>Refresh Rate:</strong> Every 5 minutes</p>
                    <p><strong>Last Update:</strong> ${new Date().toLocaleTimeString()}</p>
                    <hr style="border-color: rgba(16, 185, 129, 0.3); margin: 1rem 0;">
                    <p style="font-size: 0.9rem; color: #94a3b8;">
                        Dashboard is pulling real-time data from your PostgreSQL database through the Flask API server. Stats automatically refresh to stay current.
                    </p>
                ` : `
                    <p><strong>Status:</strong> ‚ö†Ô∏è API server offline or unreachable</p>
                    <p><strong>Data Source:</strong> Static fallback values</p>
                    <p><strong>Refresh Rate:</strong> Manual only</p>
                    <p><strong>Mode Benefits:</strong> Always accessible, perfect for demos</p>
                    <hr style="border-color: rgba(59, 130, 246, 0.3); margin: 1rem 0;">
                    <p style="font-size: 0.9rem; color: #94a3b8;">
                        Dashboard is using cached demonstration data. To enable live mode, start your Flask API server on port 5000 and refresh the page.
                    </p>
                    <div style="background: rgba(59, 130, 246, 0.1); padding: 0.75rem; border-radius: 5px; margin-top: 0.75rem; border-left: 3px solid #3b82f6;">
                        <strong>Start API:</strong><br>
                        <code style="color: #3b82f6; font-size: 0.85rem;">python api_server.py</code>
                    </div>
                `}
                
                <button onclick="this.parentElement.remove(); document.getElementById('modal-overlay').remove();" 
                        style="margin-top: 1.5rem; padding: 0.75rem 1.5rem; background: ${isLive ? '#10b981' : '#3b82f6'}; 
                        border: none; border-radius: 8px; color: white; font-weight: 600; cursor: pointer; width: 100%;">
                    Got it!
                </button>
            `;
            
            // Create overlay
            const overlay = document.createElement('div');
            overlay.id = 'modal-overlay';
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.7);
                z-index: 10000;
                backdrop-filter: blur(5px);
            `;
            overlay.onclick = () => {
                modal.remove();
                overlay.remove();
            };
            
            document.body.appendChild(overlay);
            document.body.appendChild(modal);
        }

        // Add CSS animation for pulse effect
        const style = document.createElement('style');
        style.textContent = `
            @keyframes pulse {
                0%, 100% { box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4); }
                50% { box-shadow: 0 4px 30px rgba(16, 185, 129, 0.6); }
            }
        `;
        document.head.appendChild(style);

        // Show data mode modal with connection details
        function showDataModeModal(isLive, message) {
            const modalOverlay = document.createElement('div');
            modalOverlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.7);
                z-index: 20000;
                display: flex;
                justify-content: center;
                align-items: center;
            `;
            
            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: linear-gradient(135deg, #1e3a5f 0%, #2d4a6f 100%);
                padding: 30px;
                border-radius: 15px;
                max-width: 500px;
                color: white;
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            `;
            
            modalContent.innerHTML = `
                <h2 style="margin: 0 0 20px 0; color: ${isLive ? '#10b981' : '#3b82f6'};">
                    ${isLive ? 'üü¢ Live Data Mode' : 'üìä Static Data Mode'}
                </h2>
                <p style="margin: 10px 0; line-height: 1.6;">
                    <strong>Status:</strong> ${isLive ? 'Connected to Flask API' : 'API Server Offline'}<br>
                    <strong>Endpoint:</strong> http://localhost:5000/api/teams/count<br>
                    <strong>Data Source:</strong> ${isLive ? 'PostgreSQL Database (32 teams)' : 'Static Demo Data'}<br>
                    <strong>Last Update:</strong> ${new Date().toLocaleString()}
                </p>
                ${isLive ? 
                    '<p style="color: #10b981; margin: 15px 0;">‚úÖ All systems operational</p>' : 
                    '<p style="color: #f59e0b; margin: 15px 0;">‚ö†Ô∏è Using cached data - Start API server to enable live mode</p>'
                }
                <button onclick="this.parentElement.parentElement.remove()" style="
                    background: ${isLive ? '#10b981' : '#3b82f6'};
                    color: white;
                    border: none;
                    padding: 10px 20px;
                    border-radius: 8px;
                    cursor: pointer;
                    font-weight: 600;
                    margin-top: 15px;
                ">Close</button>
            `;
            
            modalOverlay.appendChild(modalContent);
            modalOverlay.onclick = (e) => {
                if (e.target === modalOverlay) modalOverlay.remove();
            };
            document.body.appendChild(modalOverlay);
        }

        // Update data mode indicator
        function updateDataModeIndicator(isLive, message = '') {
            let indicator = document.getElementById('dataModeIndicator');
            if (!indicator) {
                indicator = document.createElement('div');
                indicator.id = 'dataModeIndicator';
                indicator.style.cssText = `
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    padding: 8px 16px;
                    border-radius: 20px;
                    font-size: 0.85rem;
                    font-weight: 600;
                    z-index: 10000;
                    backdrop-filter: blur(10px);
                    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
                    transition: all 0.3s ease;
                    cursor: pointer;
                `;
                indicator.onclick = () => showDataModeModal(isLive, message);
                document.body.appendChild(indicator);
            }
            
            if (isLive) {
                indicator.innerHTML = 'üü¢ Live Data';
                indicator.style.background = 'rgba(16, 185, 129, 0.9)';
                indicator.style.color = '#ffffff';
                indicator.title = 'Connected to Flask API (Port 5000)';
            } else {
                indicator.innerHTML = 'üìä Static Data';
                indicator.style.background = 'rgba(59, 130, 246, 0.9)';
                indicator.style.color = '#ffffff';
                indicator.title = 'Using cached data - API server offline';
            }
        }

        // Update 3D API Status Tower colors based on live/static mode
        function update3DMonitorColors(isLive) {
            if (!scene) return; // 3D scene not initialized yet
            
            const monitor = scene.getObjectByName('apiStatusMonitor');
            if (!monitor) return; // Monitor not found
            
            // Find the materials to update - MUST update both color AND emissive!
            monitor.traverse((child) => {
                if (child.isMesh) {
                    if (child.name === 'statusLED') {
                        // Update LED sphere - bright colors for visibility
                        if (isLive) {
                            child.material.color.setHex(0x44ff44); // Bright green
                            child.material.emissive.setHex(0x44ff44); // Green glow
                        } else {
                            child.material.color.setHex(0xff4444); // Bright red
                            child.material.emissive.setHex(0xff4444); // Red glow
                        }
                    } else if (child.geometry && child.geometry.type === 'ExtrudeGeometry') {
                        // Update main tower body
                        if (isLive) {
                            child.material.color.setHex(0x50c878); // Professional green
                            child.material.emissive.setHex(0x50c878); // Green glow
                        } else {
                            child.material.color.setHex(0xe63946); // Red/orange
                            child.material.emissive.setHex(0xe63946); // Red glow
                        }
                    }
                } else if (child.isLine && child.name === 'towerLine') {
                    // Update tower edges
                    if (isLive) {
                        child.material.color.setHex(0x8fff8f); // Light green edges
                    } else {
                        child.material.color.setHex(0xff8fa3); // Light red edges
                    }
                }
            });
        }

        // Initialize data loading
        async function initializeDashboard() {
            console.log('üöÄ Initializing H.C. Lombardo Dashboard...');
            
            // Load initial data
            const data = await fetchLiveData();
            updateDashboardStats(data);
            
            // Update 3D tower colors
            update3DMonitorColors(isLiveMode);
            
            // Set up auto-refresh every 5 minutes if in live mode
            if (isLiveMode && !dataUpdateInterval) {
                dataUpdateInterval = setInterval(async () => {
                    console.log('üîÑ Refreshing dashboard data...');
                    const newData = await fetchLiveData();
                    updateDashboardStats(newData);
                    update3DMonitorColors(isLiveMode);
                }, 300000); // 5 minutes
            }
        }

        // Load data when page loads
        window.addEventListener('load', initializeDashboard);

        // 3D Architecture Visualization
        let scene, camera, renderer, labelRenderer, controls;
        let architectureInitialized = false;

        function init3DArchitecture() {
            if (architectureInitialized) return;
            architectureInitialized = true;

            const container = document.getElementById('canvas-container');
            const canvas = document.getElementById('architecture-canvas');

            // Scene setup - Packet Tracer style professional network
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x2b2d42); // Packet Tracer dark background
            // No fog - clean network diagram

            // Camera - Packet Tracer style wide view for many devices
            camera = new THREE.PerspectiveCamera(65, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.set(0, 50, 40); // Much higher for network overview
            camera.lookAt(0, 0, 0);

            // WebGL Renderer setup
            renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            renderer.setPixelRatio(window.devicePixelRatio);

            // CSS2D Label Renderer
            labelRenderer = new THREE.CSS2DRenderer();
            labelRenderer.setSize(container.clientWidth, container.clientHeight);
            labelRenderer.domElement.style.position = 'absolute';
            labelRenderer.domElement.style.top = '0';
            labelRenderer.domElement.style.pointerEvents = 'none';
            container.appendChild(labelRenderer.domElement);

            // Controls - Full interactivity with room for 100s of devices
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.screenSpacePanning = false;
            controls.minDistance = 10; // Can zoom in close
            controls.maxDistance = 120; // Can zoom out very far
            controls.target.set(0, 0, 0); // Center of network
            controls.maxPolarAngle = Math.PI * 0.55; // Mostly top-down
            controls.minPolarAngle = Math.PI * 0.15;
            controls.update();

            // Lights - Packet Tracer style professional lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);

            // Main light from above
            const mainLight = new THREE.DirectionalLight(0xffffff, 0.7);
            mainLight.position.set(0, 40, 20);
            scene.add(mainLight);

            // Fill lights (cool professional tones)
            const fillLight1 = new THREE.PointLight(0x4a90e2, 0.4, 100); // Professional blue
            fillLight1.position.set(20, 15, 20);
            scene.add(fillLight1);

            const fillLight2 = new THREE.PointLight(0x50c878, 0.4, 100); // Professional green
            fillLight2.position.set(-20, 15, -20);
            scene.add(fillLight2);

            // Grid floor - Packet Tracer style (large for many devices)
            const gridHelper = new THREE.GridHelper(150, 75, 0x3a3d5c, 0x3a3d5c);
            gridHelper.material.opacity = 0.4;
            gridHelper.material.transparent = true;
            scene.add(gridHelper);

            // Create 3D Architecture
            createArchitecture();

            // Setup hover interactions
            setupHoverInteractions();

            // Animation loop - Professional subtle pulsing
            let animationTime = 0;
            function animate() {
                requestAnimationFrame(animate);
                animationTime += 0.015; // Slightly slower for professional look
                
                // Subtle pulsing glow on all objects (professional but cool)
                scene.traverse((object) => {
                    if (object.userData && object.userData.material && object.userData.pulsePhase !== undefined) {
                        const pulse = Math.sin(animationTime + object.userData.pulsePhase) * 0.25 + 0.75; // More subtle range
                        object.userData.material.emissiveIntensity = pulse;
                    }
                });
                
                controls.update();
                renderer.render(scene, camera);
                labelRenderer.render(scene, camera);
            }
            animate();
            
            // Apply initial color state based on current live mode
            // This ensures the tower colors match the current API connection status
            setTimeout(() => {
                update3DMonitorColors(isLiveMode);
            }, 100);

            // Handle window resize
            window.addEventListener('resize', () => {
                const newWidth = container.clientWidth;
                const newHeight = container.clientHeight;
                
                camera.aspect = newWidth / newHeight;
                camera.updateProjectionMatrix();
                
                renderer.setSize(newWidth, newHeight);
                labelRenderer.setSize(newWidth, newHeight);
                
                // Keep centered on resize
                controls.update();
            });
        }

        function createArchitecture() {
            // Tier 1: Frontend (React) - Top - React logo inspired hexagon (smaller for network diagram)
            const frontendShape = new THREE.Shape();
            const radius = 3; // Reduced from 4.5 for Packet Tracer scale
            for (let i = 0; i < 6; i++) {
                const angle = (Math.PI / 3) * i;
                const x = radius * Math.cos(angle);
                const y = radius * Math.sin(angle);
                if (i === 0) frontendShape.moveTo(x, y);
                else frontendShape.lineTo(x, y);
            }
            frontendShape.lineTo(radius, 0);
            
            const extrudeSettings = { depth: 1.5, bevelEnabled: true, bevelThickness: 0.2, bevelSize: 0.15, bevelSegments: 2 };
            const frontendGeometry = new THREE.ExtrudeGeometry(frontendShape, extrudeSettings);
            const frontendMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x4a90e2, // Professional blue (Packet Tracer client device)
                emissive: 0x4a90e2, 
                emissiveIntensity: 0.6,
                shininess: 100,
                transparent: true,
                opacity: 0.95
            });
            const frontend = new THREE.Mesh(frontendGeometry, frontendMaterial);
            frontend.position.set(-35, 2, -15); // Spread out for 100s of devices
            frontend.rotation.x = Math.PI / 2;
            scene.add(frontend);
            
            // Add pulsing animation
            frontend.userData.pulsePhase = 0;
            frontend.userData.material = frontendMaterial;

            // Add edges for better definition
            const frontendEdges = new THREE.EdgesGeometry(frontendGeometry);
            const frontendLine = new THREE.LineSegments(frontendEdges, new THREE.LineBasicMaterial({ color: 0x6bb6ff, linewidth: 2 }));
            frontend.add(frontendLine);

            // Add label
            addLabel('React<br><small>Port 3000</small>', frontend, 'label-frontend');

            // Store metadata for hover
            frontend.userData = {
                name: 'React Frontend',
                tier: 'Tier 1: Presentation Layer',
                port: '3000 (Development)',
                technology: 'React 18.2 with Functional Components',
                features: [
                    'Real-time data display with live updates',
                    'Responsive design (mobile & desktop)',
                    'Interactive data tables with sorting',
                    'Chart.js visualizations',
                    'RESTful API integration'
                ],
                communication: 'Sends HTTP requests to Flask API (Port 5000)',
                files: 'frontend/src/App.js, frontend/src/components/',
                dependencies: 'react, react-dom, axios, chart.js'
            };

            // Tier 2: Backend (Flask) - Middle - Professional server rack (smaller)
            const backendGroup = new THREE.Group();
            
            // Main server body
            const serverBody = new THREE.BoxGeometry(5, 3, 3); // Reduced from 8x5x4.5
            const backendMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x5a6c7d, // Professional gray (Packet Tracer server)
                emissive: 0x5a6c7d, 
                emissiveIntensity: 0.5,
                shininess: 80
            });
            const backend = new THREE.Mesh(serverBody, backendMaterial);
            backendGroup.add(backend);
            
            // Add pulsing animation
            backendGroup.userData.pulsePhase = Math.PI / 3;
            backendGroup.userData.material = backendMaterial;

            // Server rack details (horizontal lines)
            for (let i = -1.2; i <= 1.2; i += 0.6) {
                const rackLine = new THREE.Mesh(
                    new THREE.BoxGeometry(4.8, 0.1, 3.1),
                    new THREE.MeshPhongMaterial({ color: 0x3d4856, emissive: 0x3d4856, emissiveIntensity: 0.3 })
                );
                rackLine.position.y = i;
                backendGroup.add(rackLine);
            }

            // LED indicators (professional green)
            for (let i = 0; i < 3; i++) {
                const led = new THREE.Mesh(
                    new THREE.BoxGeometry(0.2, 0.2, 0.2),
                    new THREE.MeshPhongMaterial({ 
                        color: 0x50c878, // Professional green
                        emissive: 0x50c878, 
                        emissiveIntensity: 0.8 
                    })
                );
                led.position.set(-1.5 + i * 1.5, 1.4, 1.6);
                backendGroup.add(led);
            }

            const backendEdges = new THREE.EdgesGeometry(serverBody);
            const backendLine = new THREE.LineSegments(backendEdges, new THREE.LineBasicMaterial({ color: 0x7a8c9e, linewidth: 2 }));
            backendGroup.add(backendLine);

            backendGroup.position.set(0, 2, 0); // Center hub
            scene.add(backendGroup);

            addLabel('Flask API<br><small>Port 5000</small>', backendGroup, 'label-backend');

            // Store metadata for hover
            backendGroup.userData = {
                name: 'Flask API Server',
                tier: 'Tier 2: Application Layer',
                port: '5000 (DHCP Managed)',
                technology: 'Python Flask 3.0 + Flask-CORS',
                features: [
                    'RESTful API endpoints (/api/teams, /api/games)',
                    'DHCP port management (5000-5009)',
                    'Comprehensive logging system',
                    'PostgreSQL database integration',
                    'ESPN API data fetching & caching'
                ],
                communication: 'Receives requests from React, queries PostgreSQL & ESPN API',
                files: 'api_server_v2.py, db_config.py, espn_data_fetcher.py',
                dependencies: 'flask, flask-cors, psycopg2, requests'
            };

            // Tier 3: Database (PostgreSQL) - Bottom Left - Classic cylinder database (smaller)
            const dbGroup = new THREE.Group();
            
            // Database cylinder (stacked disks)
            const cylinderGeometry = new THREE.CylinderGeometry(2.2, 2.2, 3.5, 32); // Reduced from 3.5x5
            const dbMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x2a9d8f, // Professional teal (Packet Tracer database)
                emissive: 0x2a9d8f, 
                emissiveIntensity: 0.6,
                shininess: 100
            });
            const cylinder = new THREE.Mesh(cylinderGeometry, dbMaterial);
            dbGroup.add(cylinder);
            
            // Add pulsing animation
            dbGroup.userData.pulsePhase = Math.PI * 2 / 3;
            dbGroup.userData.material = dbMaterial;

            // Disk separators
            for (let i = -1.3; i <= 1.3; i += 1.3) {
                const disk = new THREE.Mesh(
                    new THREE.CylinderGeometry(2.4, 2.4, 0.15, 32),
                    new THREE.MeshPhongMaterial({ color: 0x1e7a6e, emissive: 0x1e7a6e, emissiveIntensity: 0.3 })
                );
                disk.position.y = i;
                dbGroup.add(disk);
            }

            const dbEdges = new THREE.EdgesGeometry(cylinderGeometry);
            const dbLine = new THREE.LineSegments(dbEdges, new THREE.LineBasicMaterial({ color: 0x4db8a8, linewidth: 2 }));
            dbGroup.add(dbLine);

            dbGroup.position.set(-35, 2, 15); // Bottom left corner
            scene.add(dbGroup);

            addLabel('PostgreSQL<br><small>Port 5432</small>', dbGroup, 'label-database');

            // Store metadata for hover
            dbGroup.userData = {
                name: 'PostgreSQL 18 Database',
                tier: 'Tier 3: Data Layer',
                port: '5432 (Standard PostgreSQL)',
                technology: 'PostgreSQL 18.0 on Windows x64',
                features: [
                    'Stores 32 NFL teams with full statistics',
                    'Game schedules & live scores',
                    'Historical betting data',
                    'Optimized indexes for fast queries',
                    'Automated backups & migrations'
                ],
                communication: 'Responds to SQL queries from Flask API',
                schema: 'teams, games, update_metadata tables',
                credentials: 'User: postgres, Database: nfl_analytics'
            };

            // External API (ESPN) - Bottom Right - Cloud/Server hybrid
            const apiGroup = new THREE.Group();
            
            // Main body
            const apiBody = new THREE.SphereGeometry(3, 32, 32);
            const apiMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x7fb3d5, // Professional light blue (Packet Tracer cloud)
                emissive: 0x7fb3d5, 
                emissiveIntensity: 0.5,
                shininess: 100,
                transparent: true,
                opacity: 0.9
            });
            const apiSphere = new THREE.Mesh(apiBody, apiMaterial);
            apiGroup.add(apiSphere);
            
            // Add pulsing animation
            apiGroup.userData.pulsePhase = Math.PI;
            apiGroup.userData.material = apiMaterial;

            // Cloud puffs (smaller spheres)
            const puffPositions = [
                [-2.2, 0.6, 0], [2.2, 0.6, 0], [0, 0.6, 2.2], [0, 0.6, -2.2],
                [-1.6, -0.6, 1.6], [1.6, -0.6, 1.6], [-1.6, -0.6, -1.6], [1.6, -0.6, -1.6]
            ];
            
            puffPositions.forEach(pos => {
                const puff = new THREE.Mesh(
                    new THREE.SphereGeometry(1, 16, 16), // Smaller for network diagram
                    new THREE.MeshPhongMaterial({ 
                        color: 0x5a9ec2, 
                        emissive: 0x5a9ec2, 
                        emissiveIntensity: 0.2,
                        transparent: true,
                        opacity: 0.7
                    })
                );
                puff.position.set(pos[0], pos[1], pos[2]);
                apiGroup.add(puff);
            });

            apiGroup.position.set(35, 2, 15); // Bottom right corner - spread out
            scene.add(apiGroup);

            addLabel('ESPN API<br><small>External</small>', apiGroup, 'label-api');

            // Store metadata for hover
            apiGroup.userData = {
                name: 'ESPN API',
                tier: 'External Data Source',
                port: 'HTTPS (443)',
                technology: 'ESPN Public API v3',
                features: [
                    'Live NFL game scores & updates',
                    'Team standings & rankings',
                    'Player statistics',
                    'Real-time score updates',
                    'Schedule information'
                ],
                communication: 'Flask API fetches data via HTTP requests',
                endpoints: 'espn.com/apis/v3/sports/football/nfl/',
                refresh: 'Cached data refreshed every 15 minutes'
            };

            // Tier 5: Data Monitor (Hybrid System) - Top Center - Monitoring tower/antenna
            const monitorGroup = new THREE.Group();
            
            // Main monitoring tower body (octagonal prism)
            const towerShape = new THREE.Shape();
            const towerRadius = 2.5;
            for (let i = 0; i < 8; i++) {
                const angle = (Math.PI / 4) * i;
                const x = towerRadius * Math.cos(angle);
                const y = towerRadius * Math.sin(angle);
                if (i === 0) towerShape.moveTo(x, y);
                else towerShape.lineTo(x, y);
            }
            towerShape.lineTo(towerRadius, 0);
            
            const towerExtrudeSettings = { depth: 4, bevelEnabled: false };
            const towerGeometry = new THREE.ExtrudeGeometry(towerShape, towerExtrudeSettings);
            const monitorMaterial = new THREE.MeshPhongMaterial({ 
                color: 0xe63946, // Professional red/orange (monitoring system)
                emissive: 0xe63946, 
                emissiveIntensity: 0.7,
                shininess: 100,
                transparent: true,
                opacity: 0.95
            });
            const tower = new THREE.Mesh(towerGeometry, monitorMaterial);
            tower.rotation.x = Math.PI / 2;
            monitorGroup.add(tower);
            
            // Add pulsing animation
            monitorGroup.userData.pulsePhase = Math.PI * 4 / 3;
            monitorGroup.userData.material = monitorMaterial;

            // Antenna/sensor rings (spinning rings at top)
            for (let i = 0; i < 3; i++) {
                const ring = new THREE.Mesh(
                    new THREE.TorusGeometry(1.8 - i * 0.5, 0.15, 8, 16),
                    new THREE.MeshPhongMaterial({ 
                        color: 0xff6b6b, 
                        emissive: 0xff6b6b, 
                        emissiveIntensity: 0.5 
                    })
                );
                ring.position.y = 2.5 + i * 0.4;
                ring.rotation.x = Math.PI / 2;
                monitorGroup.add(ring);
            }

            // Status LED indicator (glowing sphere at top)
            const statusLED = new THREE.Mesh(
                new THREE.SphereGeometry(0.5, 16, 16),
                new THREE.MeshPhongMaterial({ 
                    color: 0xff4444, // Red for offline (will change to green when live)
                    emissive: 0xff4444, 
                    emissiveIntensity: 1.0 
                })
            );
            statusLED.position.y = 4.5;
            statusLED.name = 'statusLED'; // Name it so we can find it later
            monitorGroup.add(statusLED);

            // Tower edges for definition
            const towerEdges = new THREE.EdgesGeometry(towerGeometry);
            const towerLine = new THREE.LineSegments(towerEdges, new THREE.LineBasicMaterial({ color: 0xff8fa3, linewidth: 2 }));
            towerLine.name = 'towerLine';
            monitorGroup.add(towerLine);

            monitorGroup.position.set(35, 2, -15); // Top right corner
            monitorGroup.name = 'apiStatusMonitor'; // Name it so we can find it later
            scene.add(monitorGroup);

            addLabel('API Status<br><small>Uptime Monitor</small>', monitorGroup, 'label-monitor');

            // Store metadata for hover
            monitorGroup.userData = {
                name: 'API Status Monitor',
                tier: 'Monitoring & Observability',
                port: 'N/A (Monitoring Service)',
                technology: 'JavaScript Fetch API with Timeout',
                features: [
                    'Auto-detects API availability (3s timeout)',
                    'Seamless fallback to static data',
                    'Visual status indicator (green=live, red=static)',
                    'Auto-refresh every 5 minutes in live mode',
                    'Clickable status badge with detailed info'
                ],
                communication: 'Monitors Flask API health via periodic checks',
                modes: 'Live Mode (connects to API) | Static Mode (cached fallback data)',
                indicator: 'Bottom-right floating badge shows current status'
            };

            // Bidirectional Connection Lines and Data Flow (Packet Tracer colors)
            createBidirectionalConnection(frontend.position, backendGroup.position, 0x4a90e2, 0x5a6c7d); // Blue to Gray
            createBidirectionalConnection(backendGroup.position, dbGroup.position, 0x5a6c7d, 0x2a9d8f); // Gray to Teal
            createBidirectionalConnection(backendGroup.position, apiGroup.position, 0x5a6c7d, 0x7fb3d5); // Gray to Light Blue
            createBidirectionalConnection(monitorGroup.position, backendGroup.position, 0xe63946, 0x5a6c7d); // Red to Gray (monitoring connection)
        }

        function createBidirectionalConnection(start, end, color1, color2) {
            // Professional connection lines - clean but visible
            const points = [start.clone(), end.clone()];
            const geometry = new THREE.BufferGeometry().setFromPoints(points);
            
            // Main clean line
            const mainLine = new THREE.Line(
                geometry, 
                new THREE.LineBasicMaterial({ 
                    color: color1, 
                    opacity: 0.7, 
                    transparent: true, 
                    linewidth: 2 
                })
            );
            scene.add(mainLine);
            
            // Subtle glowing tube for depth
            const direction = new THREE.Vector3().subVectors(end, start);
            const length = direction.length();
            const tubeGeometry = new THREE.CylinderGeometry(0.18, 0.18, length, 8);
            const tubeMaterial = new THREE.MeshBasicMaterial({ 
                color: color1, 
                transparent: true, 
                opacity: 0.5 // Slightly more visible since we removed emissive
            });
            const tube = new THREE.Mesh(tubeGeometry, tubeMaterial);
            
            // Position and rotate the tube to connect start and end
            tube.position.copy(start).add(end).multiplyScalar(0.5);
            tube.quaternion.setFromUnitVectors(
                new THREE.Vector3(0, 1, 0), 
                direction.normalize()
            );
            tube.userData.pulsePhase = Math.random() * Math.PI * 2;
            tube.userData.material = tubeMaterial;
            scene.add(tube);

            // Animated particles in both directions - MORE PARTICLES!
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    createDataFlowParticle(start, end, color1, 1.5); // Forward direction
                    createDataFlowParticle(end, start, color2, 1.5); // Reverse direction
                }, i * 500);
            }
        }

        function createDataFlowParticle(start, end, color, speed) {
            const geometry = new THREE.SphereGeometry(0.35, 16, 16); // Slightly smaller
            const material = new THREE.MeshPhongMaterial({ 
                color: color, 
                emissive: color, 
                emissiveIntensity: 1.2, // More subtle glow
                transparent: true,
                opacity: 0.9
            });
            const particle = new THREE.Mesh(geometry, material);
            
            // Subtle glowing trail
            const glowGeometry = new THREE.SphereGeometry(0.6, 16, 16);
            const glowMaterial = new THREE.MeshBasicMaterial({ 
                color: color, 
                transparent: true, 
                opacity: 0.3 // More subtle
            });
            const glow = new THREE.Mesh(glowGeometry, glowMaterial);
            particle.add(glow);
            
            particle.userData.start = start.clone();
            particle.userData.end = end.clone();
            particle.userData.progress = Math.random(); // Random start position
            particle.userData.speed = speed;
            
            scene.add(particle);

            // Animate particle
            function animateParticle() {
                particle.userData.progress += 0.01 * particle.userData.speed;
                if (particle.userData.progress > 1) {
                    particle.userData.progress = 0;
                }
                
                particle.position.lerpVectors(
                    particle.userData.start, 
                    particle.userData.end, 
                    particle.userData.progress
                );
                
                // Pulse effect
                const scale = 1 + Math.sin(particle.userData.progress * Math.PI) * 0.3;
                particle.scale.set(scale, scale, scale);
                
                requestAnimationFrame(animateParticle);
            }
            animateParticle();
        }

            function addLabel(text, mesh, className) {
                const labelDiv = document.createElement('div');
                labelDiv.className = 'label-3d ' + className;
                labelDiv.innerHTML = text;
                
                const label = new THREE.CSS2DObject(labelDiv);
                label.position.set(6, 0, 0); // Position to the right of the object, not on top
                mesh.add(label);
            }        function setupHoverInteractions() {
            const raycaster = new THREE.Raycaster();
            const mouse = new THREE.Vector2();
            const tooltip = document.getElementById('hover-tooltip');
            const canvas = document.getElementById('architecture-canvas');

            // Get all interactive objects
            const interactiveObjects = [];
            scene.traverse((object) => {
                if (object.userData && object.userData.name) {
                    interactiveObjects.push(object);
                }
            });

            canvas.addEventListener('mousemove', (event) => {
                const rect = canvas.getBoundingClientRect();
                mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
                mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;

                raycaster.setFromCamera(mouse, camera);
                const intersects = raycaster.intersectObjects(interactiveObjects, true);

                if (intersects.length > 0) {
                    // Find the parent object with userData
                    let targetObject = intersects[0].object;
                    while (targetObject && !targetObject.userData.name) {
                        targetObject = targetObject.parent;
                    }

                    if (targetObject && targetObject.userData.name) {
                        const data = targetObject.userData;
                        
                        // Build tooltip content
                        let content = `<h3>${data.name}</h3>`;
                        content += `<div class="detail-row"><span class="detail-label">Tier:</span><span class="detail-value">${data.tier}</span></div>`;
                        content += `<div class="detail-row"><span class="detail-label">Port:</span><span class="detail-value">${data.port}</span></div>`;
                        content += `<div class="detail-row"><span class="detail-label">Technology:</span><span class="detail-value">${data.technology}</span></div>`;
                        
                        if (data.features) {
                            content += `<div style="margin-top: 10px;"><strong>Features:</strong></div>`;
                            content += '<ul style="margin: 5px 0; padding-left: 20px;">';
                            data.features.forEach(f => content += `<li style="margin: 3px 0;">${f}</li>`);
                            content += '</ul>';
                        }
                        
                        content += `<div class="detail-row" style="margin-top: 8px;"><span class="detail-label">Data Flow:</span><span class="detail-value">${data.communication}</span></div>`;
                        
                        if (data.files) {
                            content += `<div class="detail-row"><span class="detail-label">Files:</span><span class="detail-value">${data.files}</span></div>`;
                        }
                        if (data.schema) {
                            content += `<div class="detail-row"><span class="detail-label">Schema:</span><span class="detail-value">${data.schema}</span></div>`;
                        }
                        if (data.endpoints) {
                            content += `<div class="detail-row"><span class="detail-label">Endpoints:</span><span class="detail-value">${data.endpoints}</span></div>`;
                        }
                        
                        tooltip.innerHTML = content;
                        tooltip.style.display = 'block';
                        tooltip.style.left = event.clientX + 'px';
                        tooltip.style.top = event.clientY + 'px';
                        
                        canvas.style.cursor = 'pointer';
                    }
                } else {
                    tooltip.style.display = 'none';
                    canvas.style.cursor = 'default';
                }
            });

            canvas.addEventListener('mouseleave', () => {
                tooltip.style.display = 'none';
                canvas.style.cursor = 'default';
            });
        }

        // Chart Initialization
        function initCharts() {
            // Performance Chart
            const perfCtx = document.getElementById('performance-chart');
            if (!perfCtx) return;

            new Chart(perfCtx, {
                type: 'bar',
                data: {
                    labels: ['Training', 'Validation', 'Test'],
                    datasets: [{
                        label: 'Accuracy (%)',
                        data: [87, 85, 84],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.6)',
                            'rgba(139, 92, 246, 0.6)',
                            'rgba(6, 182, 212, 0.6)'
                        ],
                        borderColor: [
                            'rgba(59, 130, 246, 1)',
                            'rgba(139, 92, 246, 1)',
                            'rgba(6, 182, 212, 1)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#e2e8f0' }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: { color: '#94a3b8' },
                            grid: { color: 'rgba(148, 163, 184, 0.1)' }
                        },
                        x: {
                            ticks: { color: '#94a3b8' },
                            grid: { color: 'rgba(148, 163, 184, 0.1)' }
                        }
                    }
                }
            });

            // Division Chart
            const divCtx = document.getElementById('division-chart');
            if (!divCtx) return;

            new Chart(divCtx, {
                type: 'doughnut',
                data: {
                    labels: ['AFC East', 'AFC North', 'AFC South', 'AFC West', 'NFC East', 'NFC North', 'NFC South', 'NFC West'],
                    datasets: [{
                        data: [4, 4, 4, 4, 4, 4, 4, 4],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.8)',
                            'rgba(139, 92, 246, 0.8)',
                            'rgba(6, 182, 212, 0.8)',
                            'rgba(16, 185, 129, 0.8)',
                            'rgba(59, 130, 246, 0.6)',
                            'rgba(139, 92, 246, 0.6)',
                            'rgba(6, 182, 212, 0.6)',
                            'rgba(16, 185, 129, 0.6)'
                        ],
                        borderColor: 'rgba(15, 23, 42, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: { color: '#e2e8f0' }
                        }
                    }
                }
            });
        }

        function initDatabaseChart() {
            const ctx = document.getElementById('schema-chart');
            if (!ctx) return;

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['teams', 'games', 'standings', 'scoreboard', 'injuries', 'weather', 'metadata'],
                    datasets: [{
                        label: 'Number of Columns',
                        data: [8, 12, 15, 10, 9, 7, 5],
                        backgroundColor: 'rgba(139, 92, 246, 0.6)',
                        borderColor: 'rgba(139, 92, 246, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#e2e8f0' }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { color: '#94a3b8' },
                            grid: { color: 'rgba(148, 163, 184, 0.1)' }
                        },
                        x: {
                            ticks: { color: '#94a3b8' },
                            grid: { color: 'rgba(148, 163, 184, 0.1)' }
                        }
                    }
                }
            });
        }

        // Update current date and time in header
        function updateDateTime() {
            const now = new Date();
            
            // Format date: October 10, 2025
            const dateOptions = { year: 'numeric', month: 'long', day: 'numeric' };
            const dateString = now.toLocaleDateString('en-US', dateOptions);
            
            // Format time: 3:45:12 PM
            const timeOptions = { hour: 'numeric', minute: '2-digit', second: '2-digit', hour12: true };
            const timeString = now.toLocaleTimeString('en-US', timeOptions);
            
            // Update the DOM
            document.getElementById('currentDate').textContent = dateString;
            document.getElementById('currentTime').textContent = timeString;
        }

        // Update immediately on load
        updateDateTime();
        
        // Update time every second
        setInterval(updateDateTime, 1000);
    </script>
</body>
</html>