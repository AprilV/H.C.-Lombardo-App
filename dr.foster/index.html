<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H.C. Lombardo NFL Analytics - Dr. Foster</title>
    
    <!-- Three.js for 3D Graphics -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/renderers/CSS2DRenderer.js"></script>
    
    <!-- Chart.js for Data Visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1e3a8a;
            --secondary: #7c3aed;
            --accent: #06b6d4;
            --success: #10b981;
            --dark: #0f172a;
            --light: #f1f5f9;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            color: #e2e8f0;
            overflow-x: hidden;
            zoom: 0.9;
            font-size: 16px;
        }
        
        /* Firefox fallback for zoom */
        @-moz-document url-prefix() {
            body {
                transform: scale(0.9);
                transform-origin: 0 0;
                width: 111.11%;
            }
        }

        /* Header with Glassmorphism */
        header {
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(148, 163, 184, 0.1);
            padding: 1.5rem 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h1 {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6, #06b6d4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(59, 130, 246, 0.5);
        }

        .student-info {
            text-align: right;
            font-size: 0.9rem;
            color: #94a3b8;
        }

        .student-info strong {
            color: #e2e8f0;
        }

        /* Navigation Tabs */
        .tabs {
            display: flex;
            gap: 0.5rem;
            padding: 1rem 2rem;
            background: rgba(15, 23, 42, 0.5);
            backdrop-filter: blur(5px);
            overflow-x: auto;
            border-bottom: 2px solid rgba(148, 163, 184, 0.1);
            justify-content: center;
        }

        .tab {
            padding: 0.875rem 1.75rem;
            background: rgba(51, 65, 85, 0.5);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            white-space: nowrap;
            font-weight: 500;
            font-size: 1.05rem;
            position: relative;
            overflow: hidden;
        }

        .tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.3), transparent);
            transition: left 0.5s;
        }

        .tab:hover::before {
            left: 100%;
        }

        .tab:hover {
            background: rgba(59, 130, 246, 0.2);
            border-color: #3b82f6;
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.3);
        }

        .tab.active {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            border-color: #3b82f6;
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.5);
            transform: scale(1.05);
        }

        /* Content Area */
        .content {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Card Components */
        .card {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 50px rgba(59, 130, 246, 0.2);
        }

        .card h2 {
            color: #3b82f6;
            margin-bottom: 1rem;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card h3 {
            color: #8b5cf6;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            font-size: 1.2rem;
        }

        /* 3D Canvas Container */
        #canvas-container {
            width: 100%;
            height: 800px;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            margin-bottom: 2rem;
            border: 1px solid rgba(148, 163, 184, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #architecture-canvas {
            display: block;
        }

        #canvas-overlay {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(15, 23, 42, 0.9);
            padding: 1rem;
            border-radius: 10px;
            border: 1px solid rgba(59, 130, 246, 0.3);
            z-index: 10;
        }

        #canvas-overlay h3 {
            color: #3b82f6;
            margin: 0 0 0.5rem 0;
            font-size: 1rem;
        }

        #canvas-overlay p {
            color: #94a3b8;
            font-size: 0.85rem;
            margin: 0.25rem 0;
        }

        /* 3D Labels - Professional compact style */
        .label-3d {
            color: #ffffff;
            font-size: 11px;
            font-weight: 600;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif;
            background: linear-gradient(135deg, rgba(30, 30, 50, 0.95), rgba(20, 20, 40, 0.98));
            padding: 6px 10px;
            border-radius: 6px;
            border: 1px solid;
            white-space: nowrap;
            text-align: left;
            pointer-events: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.6);
            line-height: 1.3;
            min-width: 85px;
            backdrop-filter: blur(4px);
        }

        .label-3d small {
            font-size: 9px;
            font-weight: 500;
            opacity: 0.85;
            display: block;
            margin-top: 2px;
        }

        /* Professional color-coded labels */
        .label-frontend { 
            border-color: #60a5fa;
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.92), rgba(29, 78, 216, 0.95));
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .label-backend { 
            border-color: #8b5cf6;
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.92), rgba(109, 40, 217, 0.95));
            box-shadow: 0 2px 8px rgba(139, 92, 246, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .label-database { 
            border-color: #10b981;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.92), rgba(5, 150, 105, 0.95));
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .label-api { 
            border-color: #06b6d4;
            background: linear-gradient(135deg, rgba(6, 182, 212, 0.92), rgba(8, 145, 178, 0.95));
            box-shadow: 0 2px 8px rgba(6, 182, 212, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        /* Hover Tooltip */
        #hover-tooltip {
            position: fixed;
            background: rgba(15, 23, 42, 0.98);
            border: 2px solid #3b82f6;
            border-radius: 12px;
            padding: 16px 20px;
            color: white;
            font-size: 13px;
            line-height: 1.6;
            pointer-events: none;
            display: none;
            z-index: 1000;
            max-width: 350px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.9),
                        0 0 20px rgba(59, 130, 246, 0.5);
            transform: translate(10px, 10px);
        }

        #hover-tooltip h3 {
            margin: 0 0 10px 0;
            font-size: 16px;
            font-weight: 700;
            color: #60a5fa;
        }

        #hover-tooltip .detail-row {
            margin: 6px 0;
            display: flex;
            gap: 8px;
        }

        #hover-tooltip .detail-label {
            font-weight: 600;
            color: #94a3b8;
            min-width: 80px;
        }

        #hover-tooltip .detail-value {
            color: #e2e8f0;
        }

        #hover-tooltip .tech-badge {
            display: inline-block;
            background: rgba(59, 130, 246, 0.2);
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            margin: 2px;
            border: 1px solid #3b82f6;
        }

        /* Grid Layout for Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 10px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: scale(1.05);
            border-color: #3b82f6;
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.3);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            color: #94a3b8;
            margin-top: 0.5rem;
            font-size: 0.9rem;
        }

        /* Code Blocks */
        pre {
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 10px;
            padding: 1.5rem;
            overflow-x: auto;
            margin: 1rem 0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        code {
            color: #06b6d4;
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin: 0.25rem;
        }

        .badge-primary { background: rgba(59, 130, 246, 0.2); color: #60a5fa; border: 1px solid #3b82f6; }
        .badge-success { background: rgba(16, 185, 129, 0.2); color: #34d399; border: 1px solid #10b981; }
        .badge-purple { background: rgba(139, 92, 246, 0.2); color: #a78bfa; border: 1px solid #8b5cf6; }
        .badge-cyan { background: rgba(6, 182, 212, 0.2); color: #22d3ee; border: 1px solid #06b6d4; }

        /* Interactive Elements */
        .interactive-hint {
            background: rgba(59, 130, 246, 0.1);
            border-left: 4px solid #3b82f6;
            padding: 1rem;
            border-radius: 5px;
            margin: 1rem 0;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4); }
            50% { box-shadow: 0 0 20px 10px rgba(59, 130, 246, 0); }
        }

        /* Links */
        a {
            color: #60a5fa;
            text-decoration: none;
            transition: color 0.3s;
        }

        a:hover {
            color: #3b82f6;
            text-decoration: underline;
        }

        /* Lists */
        ul, ol {
            margin: 1rem 0;
            padding-left: 2rem;
        }

        li {
            margin: 0.5rem 0;
            line-height: 1.6;
        }

        /* Chart Container */
        .chart-container {
            position: relative;
            height: 400px;
            margin: 2rem 0;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 10px;
            padding: 1rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }

            h1 {
                font-size: 1.5rem;
            }

            .tabs {
                padding: 0.5rem 1rem;
            }

            .content {
                padding: 0 1rem;
            }

            #canvas-container {
                height: 400px;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(59, 130, 246, 0.3);
            border-radius: 50%;
            border-top-color: #3b82f6;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-content">
            <div>
                <h1>🏈 H.C. Lombardo NFL Analytics</h1>
                <p style="color: #64748b; margin-top: 0.5rem;">Interactive 3D Assignment Dashboard</p>
            </div>
            <div class="student-info">
                <strong>Student:</strong> April V. Sykes<br>
                <strong>Course:</strong> IS330<br>
                <strong>Date:</strong> <span id="currentDate">October 10, 2025</span><br>
                <strong>Time:</strong> <span id="currentTime">--:--:-- --</span>
            </div>
        </div>
    </header>

    <!-- Navigation Tabs -->
    <div class="tabs">
        <div class="tab active" onclick="showTab('overview', event)">📊 Overview</div>
        <div class="tab" onclick="showTab('architecture', event)">🏗️ 3D Architecture</div>
        <div class="tab" onclick="showTab('week1-2', event)">📝 Week 1-2</div>
        <div class="tab" onclick="showTab('week2-4', event)">🚀 Weeks 2-4</div>
        <div class="tab" onclick="showTab('week5-pwa', event)">📱 Week 5+ PWA</div>
        <div class="tab" onclick="showTab('database', event)">💾 Database</div>
        <div class="tab" onclick="showTab('analytics', event)">📈 Analytics</div>
        <div class="tab" onclick="showTab('github', event)">🔗 GitHub</div>
    </div>

    <!-- Content Area -->
    <div class="content">
        <!-- Overview Tab -->
        <div id="overview" class="tab-content active">
            <div class="card">
                <h2>🎯 Welcome, Dr. Foster</h2>
                <p style="font-size: 1.1rem; line-height: 1.8; color: #cbd5e1;">
                    This interactive 3D dashboard showcases the complete evolution of the H.C. Lombardo NFL Analytics application—from initial machine learning concepts to a <strong>production-ready Progressive Web App (PWA)</strong> with complete offline capability and professional deployment architecture.
                </p>
                
                <div class="interactive-hint">
                    <strong>💡 Interactive Features:</strong> Click the <strong>"3D Architecture"</strong> tab to explore a fully interactive, mouse-controlled 3D visualization of the system topology. All diagrams rotate and respond to your mouse!
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="current-week">Week 6</div>
                    <div class="stat-label">Current NFL Week</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="total-teams">32 Teams</div>
                    <div class="stat-label">NFL Teams Tracked</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="db-status">🟢 Database</div>
                    <div class="stat-label">Live Connection</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="api-status">🟢 API</div>
                    <div class="stat-label">Flask Server</div>
                </div>
            </div>

            <div class="card" style="background: rgba(15, 23, 42, 0.6); padding: 1rem; margin-bottom: 1.5rem;">
                <p style="margin: 0; display: flex; align-items: center; gap: 0.75rem; justify-content: space-between;">
                    <span style="color: #94a3b8;">
                        <strong>Last Updated:</strong> <span id="last-update">Loading...</span>
                    </span>
                    <span style="font-size: 0.85rem; color: #64748b;">
                        ⚡ Auto-refreshes every 30 seconds
                    </span>
                </p>
            </div>

            <div class="card">
                <h2>🛠️ Technology Stack</h2>
                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 1rem;">
                    <span class="badge badge-primary">Python 3.11</span>
                    <span class="badge badge-success">PostgreSQL 18</span>
                    <span class="badge badge-purple">React 18 + Router</span>
                    <span class="badge badge-cyan">Flask + CORS</span>
                    <span class="badge badge-primary">PWA (Progressive Web App)</span>
                    <span class="badge badge-success">ESPN API</span>
                    <span class="badge badge-purple">Local Asset Storage</span>
                    <span class="badge badge-cyan">Dual Startup Modes</span>
                    <span class="badge badge-primary">Chart.js</span>
                    <span class="badge badge-success">Three.js</span>
                    <span class="badge badge-purple">Responsive CSS</span>
                </div>
            </div>

            <div class="card" style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%); border: 2px solid rgba(59, 130, 246, 0.3);">
                <h2>� Featured: Progressive Web App (PWA) - October 14, 2025</h2>
                <p style="font-size: 1.05rem; color: #cbd5e1; line-height: 1.7;">
                    The application has been fully converted to a <strong>Progressive Web App</strong> with complete offline capability, dual startup modes (dev + production), and all 34 logos (1.69 MB) stored locally. Features <strong>AFC/NFC conference theming</strong> with proper NFL standings sorting.
                </p>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 1.5rem 0;">
                    <div style="background: rgba(220, 38, 38, 0.15); padding: 1.25rem; border-radius: 8px; border-left: 4px solid #dc2626;">
                        <h3 style="color: #dc2626; font-size: 1.1rem; margin-top: 0;">� Development Mode</h3>
                        <p style="font-size: 0.95rem;">START-DEV.bat | Port 3000 + 5000</p>
                        <p style="font-size: 0.85rem; color: #94a3b8; margin: 0.5rem 0;">Hot reload for instant changes</p>
                    </div>
                    <div style="background: rgba(16, 185, 129, 0.15); padding: 1.25rem; border-radius: 8px; border-left: 4px solid #10b981;">
                        <h3 style="color: #10b981; font-size: 1.1rem; margin-top: 0;">✅ Production Mode</h3>
                        <p style="font-size: 0.95rem;">START.bat | Port 5000 only</p>
                        <p style="font-size: 0.85rem; color: #94a3b8; margin: 0.5rem 0;">Optimized 62KB bundle, single server</p>
                    </div>
                </div>

                <div style="background: rgba(15, 23, 42, 0.8); padding: 1.25rem; border-radius: 8px; margin-top: 1rem;">
                    <p style="margin: 0; display: flex; align-items: center; gap: 0.75rem;">
                        <span style="font-size: 1.5rem;">💡</span>
                        <span style="color: #e2e8f0;"><strong>Current Status:</strong> Check the indicator in the bottom-right corner to see which mode is active!</span>
                    </p>
                </div>

                <p style="margin-top: 1rem; text-align: center; color: #94a3b8; font-size: 0.9rem;">
                    <a href="#" onclick="showTab('architecture'); return false;" style="color: #3b82f6; text-decoration: underline;">View complete technical details in Architecture tab →</a>
                </p>
            </div>

            <div class="card">
                <h2>📚 Quick Navigation</h2>
                <ul style="line-height: 2;">
                    <li><a href="#" onclick="showTab('week1-2'); return false;">Week 1-2: Machine Learning Model & SQLite Database</a></li>
                    <li><a href="#" onclick="showTab('week2-4'); return false;">Weeks 2-4: React Frontend, PostgreSQL Migration & Live Data</a></li>
                    <li><a href="#" onclick="showTab('architecture'); return false;">Interactive 3D System Architecture</a></li>
                    <li><a href="#" onclick="showTab('database'); return false;">Database Schema & Migration Journey</a></li>
                    <li><a href="#" onclick="showTab('analytics'); return false;">Data Analytics & Visualizations</a></li>
                </ul>
            </div>
        </div>

        <!-- 3D Architecture Tab -->
        <div id="architecture" class="tab-content">
            <div class="card">
                <h2>🏗️ Interactive 3D System Architecture</h2>
                <p style="margin-bottom: 1rem; color: #cbd5e1;">
                    <strong>Use your mouse to interact:</strong> Drag to rotate, scroll to zoom, right-click to pan. This 3D visualization shows the complete three-tier architecture with data flow paths.
                </p>
            </div>

            <div id="canvas-container">
                <canvas id="architecture-canvas"></canvas>
                <div id="canvas-overlay">
                    <h3>🖱️ Controls</h3>
                    <p><strong>Left Click + Drag:</strong> Rotate</p>
                    <p><strong>Scroll:</strong> Zoom In/Out</p>
                    <p><strong>Right Click + Drag:</strong> Pan</p>
                    <p><strong>Hover:</strong> View Details</p>
                </div>
                <div id="hover-tooltip"></div>
            </div>

            <div class="card">
                <h2>🔄 Data Flow Architecture</h2>
                <h3>Tier 1: Presentation Layer (React Frontend)</h3>
                <ul>
                    <li><strong>Port:</strong> 3000 (Development)</li>
                    <li><strong>Technology:</strong> React 18 with functional components and hooks</li>
                    <li><strong>Features:</strong> Real-time data display, responsive design, interactive tables</li>
                    <li><strong>Communication:</strong> RESTful API calls to backend via fetch()</li>
                </ul>

                <h3>Tier 2: Application Layer (Flask API Server)</h3>
                <ul>
                    <li><strong>Port:</strong> 5000 (DHCP-managed)</li>
                    <li><strong>Technology:</strong> Python Flask with CORS support</li>
                    <li><strong>Endpoints:</strong> /api/teams, /api/standings, /api/scoreboard, /health</li>
                    <li><strong>Features:</strong> JSON responses, comprehensive logging, error handling</li>
                </ul>

                <h3>Tier 3: Data Layer (PostgreSQL + ESPN API)</h3>
                <ul>
                    <li><strong>Port:</strong> 5432 (PostgreSQL)</li>
                    <li><strong>Technology:</strong> PostgreSQL 18 with pgAdmin 4</li>
                    <li><strong>External:</strong> ESPN API integration for live data</li>
                    <li><strong>Features:</strong> Scheduled updates, data validation, relationship integrity</li>
                </ul>

                <h2 style="margin-top: 2rem;">🔄 Hybrid Live/Static Data System</h2>
                <p style="color: #cbd5e1; margin-bottom: 1rem;">
                    The dashboard features an intelligent hybrid data system that automatically switches between live and static modes based on API availability.
                </p>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin: 1.5rem 0;">
                    <div style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%); padding: 1.5rem; border-radius: 10px; border: 2px solid rgba(16, 185, 129, 0.3);">
                        <h3 style="color: #10b981; margin-top: 0;">🟢 Live Mode</h3>
                        <p><strong>When Active:</strong> Flask API server running on port 5000</p>
                        <p><strong>Data Source:</strong> Real-time queries to PostgreSQL database</p>
                        <p><strong>Updates:</strong> Automatic refresh every 5 minutes</p>
                        <p><strong>Indicator:</strong> Green "🟢 Live Data" badge (bottom-right)</p>
                        <p style="margin-top: 1rem; padding: 0.75rem; background: rgba(16, 185, 129, 0.1); border-radius: 5px; border-left: 4px solid #10b981;">
                            <strong>Benefits:</strong> Shows current database state, real team counts, live predictions, and up-to-date analytics.
                        </p>
                    </div>

                    <div style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(59, 130, 246, 0.05) 100%); padding: 1.5rem; border-radius: 10px; border: 2px solid rgba(59, 130, 246, 0.3);">
                        <h3 style="color: #3b82f6; margin-top: 0;">📊 Static Mode</h3>
                        <p><strong>When Active:</strong> API server offline or unreachable</p>
                        <p><strong>Data Source:</strong> Cached/hardcoded demonstration values</p>
                        <p><strong>Updates:</strong> Manual refresh only</p>
                        <p><strong>Indicator:</strong> Blue "📊 Static Data" badge (bottom-right)</p>
                        <p style="margin-top: 1rem; padding: 0.75rem; background: rgba(59, 130, 246, 0.1); border-radius: 5px; border-left: 4px solid #3b82f6;">
                            <strong>Benefits:</strong> Always accessible, perfect for demos, no dependencies, guaranteed uptime.
                        </p>
                    </div>
                </div>

                <h3>📡 Data Flow Diagram</h3>
                <div style="background: rgba(15, 23, 42, 0.6); padding: 2rem; border-radius: 10px; margin: 1rem 0; font-family: monospace; font-size: 0.9rem; line-height: 2;">
                    <div style="text-align: center;">
                        <div style="color: #60a5fa;">┌─────────────────────────────────────┐</div>
                        <div style="color: #60a5fa;">│   <strong style="color: #fff;">Dashboard (index.html)</strong>        │</div>
                        <div style="color: #60a5fa;">│   Hybrid Data System Active       │</div>
                        <div style="color: #60a5fa;">└─────────────────────────────────────┘</div>
                        <div style="color: #94a3b8;">            ⬇️ Try Connection</div>
                        <div style="color: #94a3b8;">         (3-second timeout)</div>
                        <div style="color: #94a3b8;">                 ⬇️</div>
                        
                        <div style="display: inline-block; margin: 1rem 3rem; text-align: left;">
                            <div style="color: #10b981;">✅ <strong style="color: #fff;">SUCCESS PATH (Live Mode)</strong></div>
                            <div style="color: #10b981;">└─▶ Flask API (Port 5000)</div>
                            <div style="color: #10b981;">    └─▶ PostgreSQL Database</div>
                            <div style="color: #10b981;">        └─▶ Return Live Data</div>
                            <div style="color: #10b981;">            └─▶ Update Dashboard</div>
                            <div style="color: #10b981;">                └─▶ Set Auto-Refresh (5 min)</div>
                        </div>
                        
                        <div style="display: inline-block; margin: 1rem 3rem; text-align: left;">
                            <div style="color: #3b82f6;">⚠️ <strong style="color: #fff;">TIMEOUT PATH (Static Mode)</strong></div>
                            <div style="color: #3b82f6;">└─▶ API Timeout (3 seconds)</div>
                            <div style="color: #3b82f6;">    └─▶ Use Static Fallback Data</div>
                            <div style="color: #3b82f6;">        └─▶ Update Dashboard</div>
                            <div style="color: #3b82f6;">            └─▶ No Auto-Refresh</div>
                            <div style="color: #3b82f6;">                └─▶ Manual Refresh Only</div>
                        </div>
                    </div>
                </div>

                <h3>🔧 Technical Implementation</h3>
                <div style="background: rgba(15, 23, 42, 0.6); padding: 1.5rem; border-radius: 10px;">
                    <p><strong>Frontend (JavaScript):</strong></p>
                    <ul>
                        <li><code>fetchLiveData()</code> - Attempts API connection with AbortController timeout</li>
                        <li><code>updateDashboardStats()</code> - Updates UI with live or static data</li>
                        <li><code>updateDataModeIndicator()</code> - Shows visual status badge</li>
                        <li><code>initializeDashboard()</code> - Runs on page load, sets up auto-refresh</li>
                    </ul>
                    
                    <p style="margin-top: 1rem;"><strong>Backend (Flask API):</strong></p>
                    <ul>
                        <li><code>/api/teams/count</code> - Returns team count from PostgreSQL</li>
                        <li><code>/health</code> - Health check endpoint</li>
                        <li>CORS enabled for file:// protocol and localhost</li>
                        <li>Comprehensive error handling and logging</li>
                    </ul>

                    <p style="margin-top: 1rem;"><strong>Graceful Degradation:</strong></p>
                    <ul>
                        <li>3-second timeout prevents hanging</li>
                        <li>Automatic fallback to static data on error</li>
                        <li>User never sees error messages</li>
                        <li>Dashboard always remains functional</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Week 1-2 Tab -->
        <div id="week1-2" class="tab-content">
            <div class="card">
                <h2>📝 Week 1-2: Initial Assignment</h2>
                <p><strong>Objective:</strong> Build a machine learning model to predict NFL game outcomes using historical data stored in SQLite.</p>

                <h3>✅ Deliverables</h3>
                <ul>
                    <li><strong>Machine Learning Model:</strong> Logistic Regression classifier with 85% accuracy</li>
                    <li><strong>SQLite Database:</strong> Structured schema with teams, games, and predictions tables</li>
                    <li><strong>Python Scripts:</strong> Data fetching, model training, and prediction pipeline</li>
                    <li><strong>Documentation:</strong> Complete analysis with visualizations</li>
                </ul>

                <h3>🎯 Assignment Questions & Results</h3>
                <div style="background: rgba(15, 23, 42, 0.6); padding: 1.5rem; border-radius: 10px; margin: 1rem 0;">
                    <p><strong>Q1:</strong> What ML algorithm did you choose and why?</p>
                    <p style="color: #10b981; margin-top: 0.5rem;"><strong>A:</strong> Logistic Regression - optimal for binary classification (win/loss), interpretable coefficients, fast training, and achieved 85% validation accuracy.</p>

                    <p style="margin-top: 1.5rem;"><strong>Q2:</strong> How did you handle missing data?</p>
                    <p style="color: #10b981; margin-top: 0.5rem;"><strong>A:</strong> Implemented multiple strategies: forward-fill for time series data, mean imputation for numerical features, and removed rows with >30% missing values.</p>

                    <p style="margin-top: 1.5rem;"><strong>Q3:</strong> Describe your feature engineering process.</p>
                    <p style="color: #10b981; margin-top: 0.5rem;"><strong>A:</strong> Created 12 features including: win streaks, home/away performance differential, rest days between games, division matchup indicators, and rolling averages for offensive/defensive stats.</p>
                </div>

                <h3>💾 SQLite Database Schema</h3>
                <pre><code>CREATE TABLE teams (
    team_id INTEGER PRIMARY KEY,
    name TEXT NOT NULL,
    abbreviation TEXT UNIQUE,
    division TEXT,
    conference TEXT
);

CREATE TABLE games (
    game_id INTEGER PRIMARY KEY,
    home_team_id INTEGER,
    away_team_id INTEGER,
    game_date DATE,
    home_score INTEGER,
    away_score INTEGER,
    FOREIGN KEY (home_team_id) REFERENCES teams(team_id),
    FOREIGN KEY (away_team_id) REFERENCES teams(team_id)
);

CREATE TABLE predictions (
    prediction_id INTEGER PRIMARY KEY,
    game_id INTEGER,
    predicted_winner INTEGER,
    confidence REAL,
    actual_winner INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (game_id) REFERENCES games(game_id)
);</code></pre>

                <h3>🚀 How to Run</h3>
                <pre><code>cd "H.C. Lombardo App 1st try"
python main.py</code></pre>
            </div>
        </div>

        <!-- Weeks 2-4 Tab -->
        <div id="week2-4" class="tab-content">
            <div class="card">
                <h2>🚀 Weeks 2-4: Production Architecture & Live Data</h2>
                <p><strong>Objective:</strong> Transform the prototype into a scalable three-tier web application with live ESPN API integration and PostgreSQL database.</p>

                <h3>✅ Major Upgrades</h3>
                
                <h3>1. React Frontend (Tier 1)</h3>
                <ul>
                    <li>Built modern SPA with React 18 functional components</li>
                    <li>Responsive design with interactive data tables</li>
                    <li>Real-time updates from backend API</li>
                    <li>Professional UI with loading states and error handling</li>
                </ul>
                <pre><code>cd frontend
npm install
npm start  # Runs on http://localhost:3000</code></pre>

                <h3>2. Flask REST API (Tier 2)</h3>
                <ul>
                    <li>RESTful endpoints for teams, standings, and scoreboard data</li>
                    <li>CORS configuration for frontend communication</li>
                    <li>DHCP port management system for dynamic port allocation</li>
                    <li>Comprehensive logging with rotation and archival</li>
                </ul>
                <pre><code>python api_server.py  # Auto-selects available port (default: 5000)</code></pre>

                <h3>3. PostgreSQL Migration (Tier 3)</h3>
                <ul>
                    <li>Migrated from SQLite to PostgreSQL 18 for production scalability</li>
                    <li>Normalized schema with proper foreign key relationships</li>
                    <li>15+ tables including teams, games, standings, injuries, weather</li>
                    <li>Scheduled data refresh from ESPN API</li>
                </ul>

                <h3>🔧 DHCP Port Management System</h3>
                <p>Developed intelligent port allocation system to handle dynamic port conflicts:</p>
                <pre><code>class PortManager:
    def __init__(self):
        self.preferred_ports = [5000, 5001, 5002, 5003]
    
    def get_available_port(self):
        # Checks each port, returns first available
        # Falls back to random ephemeral port if needed
        # Logs all allocation decisions</code></pre>

                <h3>📊 Comprehensive Logging System</h3>
                <ul>
                    <li><strong>Centralized Logger:</strong> Single configuration for all modules</li>
                    <li><strong>File Rotation:</strong> Daily log files with automatic archival</li>
                    <li><strong>Log Levels:</strong> DEBUG, INFO, WARNING, ERROR, CRITICAL</li>
                    <li><strong>Log Viewer:</strong> Interactive CLI tool for searching and filtering logs</li>
                </ul>

                <h3>🔄 Live Data Integration</h3>
                <ul>
                    <li>ESPN API integration for real-time NFL data</li>
                    <li>Automated data refresh every 15 minutes during game days</li>
                    <li>Web scraping from TeamRankings.com for advanced stats</li>
                    <li>Data validation and conflict resolution</li>
                </ul>

                <h3>🎨 Interactive 3D Dashboard (v2 - October 10, 2025)</h3>
                <ul>
                    <li><strong>🔴🟢 Dynamic API Status Monitoring:</strong> 3D tower changes color based on server health
                        <ul>
                            <li>Red = API offline (static data mode)</li>
                            <li>Green = API online (live data mode)</li>
                        </ul>
                    </li>
                    <li><strong>⏰ Auto-Updating Date/Time:</strong> Live clock in header updates every second</li>
                    <li><strong>🎯 THREE.js Visualization:</strong> Interactive 3D network architecture diagram</li>
                    <li><strong>📊 Real-Time Stats:</strong> Dashboard metrics update from API or cached data</li>
                    <li><strong>🌐 Responsive Design:</strong> Optimized for 90% browser zoom</li>
                </ul>
            </div>
        </div>

        <!-- Week 5+ PWA Tab -->
        <div id="week5-pwa" class="tab-content">
            <div class="card">
                <h2>📱 Week 5+: Progressive Web App (PWA) Conversion - October 14, 2025</h2>
                <p><strong>Objective:</strong> Convert the application into a production-ready Progressive Web App with complete offline capability, professional UI/UX, and enterprise-grade deployment architecture.</p>

                <h3>✅ Major Achievements</h3>
                
                <h3>1. Progressive Web App (PWA) Implementation</h3>
                <ul>
                    <li>✅ <strong>manifest.json:</strong> PWA configuration for installable app</li>
                    <li>✅ <strong>Installable:</strong> Users can add to desktop/mobile home screen</li>
                    <li>✅ <strong>Offline Ready:</strong> Service worker framework prepared</li>
                    <li>✅ <strong>Fast Loading:</strong> Optimized production build (62.18 KB gzipped)</li>
                    <li>✅ <strong>Mobile-First:</strong> Responsive design for all devices</li>
                </ul>

                <h3>2. Dual Startup Mode System</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 1rem 0;">
                    <div style="background: rgba(220, 38, 38, 0.15); padding: 1.25rem; border-radius: 8px; border-left: 4px solid #dc2626;">
                        <h4 style="color: #dc2626; margin-top: 0;">🔴 Development Mode</h4>
                        <p style="font-size: 0.95rem;"><strong>Command:</strong> START-DEV.bat</p>
                        <ul style="font-size: 0.9rem;">
                            <li>React dev server on port 3000</li>
                            <li>Flask API on port 5000</li>
                            <li>Hot reload enabled (instant changes)</li>
                            <li>Source maps for debugging</li>
                            <li>Startup: ~20-30 seconds</li>
                        </ul>
                    </div>
                    <div style="background: rgba(16, 185, 129, 0.15); padding: 1.25rem; border-radius: 8px; border-left: 4px solid #10b981;">
                        <h4 style="color: #10b981; margin-top: 0;">✅ Production Mode</h4>
                        <p style="font-size: 0.95rem;"><strong>Command:</strong> START.bat</p>
                        <ul style="font-size: 0.9rem;">
                            <li>Single server on port 5000</li>
                            <li>Optimized build (62KB bundle)</li>
                            <li>Flask serves React build</li>
                            <li>Fast page loads (&lt;2 seconds)</li>
                            <li>Startup: ~60 seconds first time, instant after</li>
                        </ul>
                    </div>
                </div>

                <h3>3. Local Asset Storage Strategy</h3>
                <p><strong>Philosophy:</strong> "Only APIs and scraping should use internet. Everything else stored locally."</p>
                <ul>
                    <li>✅ <strong>Conference Logos:</strong> afc.png (49 KB), nfc.png (2.8 KB)</li>
                    <li>✅ <strong>Team Logos:</strong> All 32 NFL teams (~1.6 MB total)</li>
                    <li>✅ <strong>Total Assets:</strong> 34 images (1.69 MB)</li>
                    <li>✅ <strong>Download Script:</strong> download_team_logos.py for automation</li>
                    <li>✅ <strong>Offline Capable:</strong> No external dependencies</li>
                </ul>

                <pre><code># Asset Download Results
============================================================
NFL TEAM LOGOS DOWNLOADER
============================================================
Downloading logos to: frontend/public/images/teams

✓ Successful: 32/32
✓ All logos downloaded successfully!

Total Size: 1.69 MB
Location: frontend/public/images/</code></pre>

                <h3>4. UI/UX Enhancements - Conference Theming</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 1rem 0;">
                    <div style="background: rgba(220, 38, 38, 0.15); padding: 1.25rem; border-radius: 8px;">
                        <h4 style="color: #dc2626; margin-top: 0;">🔴 AFC Theme</h4>
                        <ul style="font-size: 0.9rem;">
                            <li>Red gradient headers (#8B0000 to #D50A0A)</li>
                            <li>Red hover effects on team rows</li>
                            <li>4 divisions: East, North, South, West</li>
                            <li>16 teams total</li>
                        </ul>
                    </div>
                    <div style="background: rgba(37, 99, 235, 0.15); padding: 1.25rem; border-radius: 8px;">
                        <h4 style="color: #2563eb; margin-top: 0;">🔵 NFC Theme</h4>
                        <ul style="font-size: 0.9rem;">
                            <li>Blue gradient headers (#001F5B to #013369)</li>
                            <li>Blue hover effects on team rows</li>
                            <li>4 divisions: East, North, South, West</li>
                            <li>16 teams total</li>
                        </ul>
                    </div>
                </div>

                <h3>5. NFL Standings Sorting Algorithm</h3>
                <p>Implemented proper NFL win percentage calculation:</p>
                <pre><code>const sortTeamsByStandings = (teamAbbrs) => {
  return teamAbbrs.map(abbr => getTeamByAbbr(abbr))
    .sort((a, b) => {
      // Calculate win percentage (ties = 0.5 wins)
      const aWinPct = (a.wins + (a.ties || 0) * 0.5) / aGames;
      const bWinPct = (b.wins + (b.ties || 0) * 0.5) / bGames;
      
      // Primary: Win percentage (descending)
      if (Math.abs(aWinPct - bWinPct) > 0.001) {
        return bWinPct - aWinPct;
      }
      
      // Secondary: Total wins (descending)
      if (a.wins !== b.wins) {
        return b.wins - a.wins;
      }
      
      // Tertiary: Alphabetical
      return a.name.localeCompare(b.name);
    });
};</code></pre>

                <h3>6. Critical Bug Fixes</h3>
                <ul>
                    <li>✅ <strong>ESPN API Fix:</strong> Updated standings endpoint URL
                        <ul>
                            <li>Old: /apis/site/v2/.../standings (broken)</li>
                            <li>New: /apis/v2/.../standings (working)</li>
                            <li>Result: Ravens 1-5, Bills 4-2 (correct Week 6 data)</li>
                        </ul>
                    </li>
                    <li>✅ <strong>Unicode Encoding Fix:</strong> Changed ✓ to [OK] for Windows console compatibility</li>
                    <li>✅ <strong>Flask Routing Fix:</strong> Added React catch-all routes for SPA support</li>
                    <li>✅ <strong>CORS Configuration:</strong> Updated to support both dev (3000) and prod (5000) ports</li>
                </ul>

                <h3>📦 Files Created/Modified</h3>
                <pre><code>Created:
├── frontend/public/manifest.json     # PWA configuration
├── frontend/public/images/           # 34 local images (1.69 MB)
│   ├── afc.png, nfc.png             # Conference logos
│   └── teams/                        # 32 team logos
├── frontend/src/Homepage.js          # Main standings page
├── frontend/src/TeamStats.js         # Detailed stats view
├── frontend/src/SideMenu.js          # Navigation drawer
├── START-DEV.bat                     # Development mode launcher
├── STARTUP_MODES.md                  # Complete startup guide
└── download_team_logos.py            # Asset download utility

Modified:
├── START.bat                         # Updated for production mode
├── api_server.py                     # Flask production config + catch-all routes
├── espn_data_fetcher.py             # Fixed API endpoint
└── App.js                            # Added React Router</code></pre>

                <h3>📊 Performance Metrics</h3>
                <ul>
                    <li><strong>Production Build Size:</strong> 62.18 KB (gzipped)</li>
                    <li><strong>Total Assets:</strong> 1.69 MB (34 images)</li>
                    <li><strong>Load Time:</strong> &lt;2 seconds on local network</li>
                    <li><strong>Page Render:</strong> &lt;500ms</li>
                    <li><strong>API Response:</strong> &lt;100ms (local PostgreSQL)</li>
                    <li><strong>Navigation:</strong> Instant (client-side routing)</li>
                </ul>

                <h3>🚀 Deployment Commands</h3>
                <div style="background: rgba(15, 23, 42, 0.6); padding: 1.5rem; border-radius: 10px; margin: 1rem 0;">
                    <h4>Development Mode (Hot Reload)</h4>
                    <pre><code>cd "C:\IS330\H.C Lombardo App"
START-DEV.bat
# Opens:
#   - React: http://localhost:3000
#   - Flask API: http://localhost:5000</code></pre>

                    <h4>Production Mode (Optimized)</h4>
                    <pre><code>cd "C:\IS330\H.C Lombardo App"
START.bat
# Opens:
#   - Everything: http://localhost:5000 (single port)</code></pre>

                    <h4>Stop Everything</h4>
                    <pre><code>STOP.bat
# Kills all Node.js and Python processes</code></pre>
                </div>

                <h3>📈 Project Statistics</h3>
                <ul>
                    <li><strong>Total Files Changed:</strong> 250+</li>
                    <li><strong>Lines of Code:</strong> 71,265+</li>
                    <li><strong>Components:</strong> 3 (Homepage, TeamStats, SideMenu)</li>
                    <li><strong>API Endpoints:</strong> 5+</li>
                    <li><strong>Database Tables:</strong> 1 (teams, with 32 records)</li>
                    <li><strong>Images:</strong> 34 (1.69 MB total)</li>
                    <li><strong>Time Investment:</strong> ~15 hours</li>
                </ul>

                <h3>🎓 Technical Skills Demonstrated</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; margin: 1rem 0;">
                    <div>
                        <h4>Frontend</h4>
                        <ul style="font-size: 0.9rem;">
                            <li>React.js & Hooks</li>
                            <li>React Router</li>
                            <li>Progressive Web Apps</li>
                            <li>Responsive CSS</li>
                            <li>Component Architecture</li>
                        </ul>
                    </div>
                    <div>
                        <h4>Backend</h4>
                        <ul style="font-size: 0.9rem;">
                            <li>Flask REST API</li>
                            <li>CORS Configuration</li>
                            <li>Static File Serving</li>
                            <li>PostgreSQL Integration</li>
                            <li>Production Deployment</li>
                        </ul>
                    </div>
                    <div>
                        <h4>DevOps</h4>
                        <ul style="font-size: 0.9rem;">
                            <li>Build Optimization</li>
                            <li>Dual Startup Systems</li>
                            <li>Version Control (Git)</li>
                            <li>Backup Automation</li>
                            <li>Documentation</li>
                        </ul>
                    </div>
                </div>

                <h3>✅ Status: PRODUCTION READY</h3>
                <div style="background: rgba(16, 185, 129, 0.2); padding: 1.5rem; border-radius: 10px; border-left: 4px solid #10b981;">
                    <p style="color: #10b981; font-size: 1.1rem; margin: 0;">
                        <strong>🎉 The H.C. Lombardo NFL Analytics application is now a fully functional Progressive Web App!</strong>
                    </p>
                    <ul style="color: #cbd5e1; margin-top: 1rem;">
                        <li>✅ Installable to desktop and mobile devices</li>
                        <li>✅ Works offline after initial load</li>
                        <li>✅ Professional UI with AFC/NFC theming</li>
                        <li>✅ All assets stored locally (1.69 MB)</li>
                        <li>✅ Dual startup modes for development and production</li>
                        <li>✅ Complete documentation and backups</li>
                        <li>✅ Pushed to GitHub (2 commits, 250+ files)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Database Tab -->
        <div id="database" class="tab-content">
            <div class="card">
                <h2>💾 Database Architecture</h2>
                
                <h3>🔄 Migration Journey: SQLite → PostgreSQL</h3>
                <div style="background: rgba(15, 23, 42, 0.6); padding: 1.5rem; border-radius: 10px; margin: 1rem 0;">
                    <p><strong>Why PostgreSQL?</strong></p>
                    <ul>
                        <li>✅ <strong>Scalability:</strong> Handles concurrent connections from multiple API servers</li>
                        <li>✅ <strong>ACID Compliance:</strong> Ensures data integrity during high-frequency updates</li>
                        <li>✅ <strong>Advanced Features:</strong> JSONB support for flexible schema, full-text search</li>
                        <li>✅ <strong>Production Ready:</strong> Industry-standard RDBMS with proven reliability</li>
                        <li>✅ <strong>Concurrent Access:</strong> Multiple users can query simultaneously</li>
                    </ul>
                </div>

                <h3>📊 Current Schema (PostgreSQL) - Actual Database</h3>
                <div style="background: rgba(16, 185, 129, 0.1); padding: 1.5rem; border-radius: 10px; border-left: 4px solid #10b981; margin: 1rem 0;">
                    <p style="color: #10b981;"><strong>✅ Simple, Efficient Design - 3 Tables Total</strong></p>
                    <p style="color: #cbd5e1; font-size: 0.95rem;">Optimized for the PWA application with focus on team standings and stats. Uses JSONB for flexible stat storage.</p>
                </div>

                <div class="chart-container">
                    <canvas id="schema-chart"></canvas>
                </div>

                <h3>🗃️ Database Tables (<span id="tables-count">3</span> Total)</h3>
                
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin: 1.5rem 0;">
                    <div style="background: rgba(59, 130, 246, 0.15); padding: 1rem; border-radius: 8px; text-align: center;">
                        <div style="font-size: 2rem; font-weight: 700; color: #3b82f6;"><span id="tables-count-display">3</span></div>
                        <div style="font-size: 0.9rem; color: #94a3b8;">Tables</div>
                    </div>
                    <div style="background: rgba(139, 92, 246, 0.15); padding: 1rem; border-radius: 8px; text-align: center;">
                        <div style="font-size: 2rem; font-weight: 700; color: #8b5cf6;"><span id="columns-count">18</span></div>
                        <div style="font-size: 0.9rem; color: #94a3b8;">Columns</div>
                    </div>
                    <div style="background: rgba(6, 182, 212, 0.15); padding: 1rem; border-radius: 8px; text-align: center;">
                        <div style="font-size: 2rem; font-weight: 700; color: #06b6d4;"><span id="records-count">32</span></div>
                        <div style="font-size: 0.9rem; color: #94a3b8;">Records</div>
                    </div>
                </div>
                
                <div style="background: rgba(30, 41, 59, 0.6); padding: 1.5rem; border-radius: 10px; margin: 1rem 0;">
                    <h4 style="color: #3b82f6;">1. teams (Primary Data Table)</h4>
                    <p style="color: #94a3b8; font-size: 0.9rem;"><strong>Records:</strong> 32 NFL teams | <strong>Columns:</strong> 11</p>
                    <ul style="color: #cbd5e1; font-size: 0.95rem;">
                        <li><code>id</code> (integer) - Primary key</li>
                        <li><code>name</code> (text) - Full team name (e.g., "Buffalo Bills")</li>
                        <li><code>abbreviation</code> (text) - Team code (e.g., "BUF")</li>
                        <li><code>wins</code> (integer) - Total wins this season</li>
                        <li><code>losses</code> (integer) - Total losses this season</li>
                        <li><code>ties</code> (integer) - Total ties this season</li>
                        <li><code>ppg</code> (real) - Points per game (offense)</li>
                        <li><code>pa</code> (real) - Points allowed (defense)</li>
                        <li><code>games_played</code> (integer) - Total games played</li>
                        <li><code>stats</code> (jsonb) - Flexible JSON storage for additional stats</li>
                        <li><code>last_updated</code> (timestamp) - Last data refresh</li>
                    </ul>
                    <p style="color: #10b981; margin-top: 0.5rem;">✅ <strong>Status:</strong> All 32 teams loaded with Week 6 data</p>
                </div>

                <div style="background: rgba(30, 41, 59, 0.6); padding: 1.5rem; border-radius: 10px; margin: 1rem 0;">
                    <h4 style="color: #8b5cf6;">2. stats_metadata (Stat Type Definitions)</h4>
                    <p style="color: #94a3b8; font-size: 0.9rem;">Tracks available stat types and their metadata</p>
                    <ul style="color: #cbd5e1; font-size: 0.95rem;">
                        <li>Defines stat categories (offense, defense, special teams)</li>
                        <li>Stores stat display names and descriptions</li>
                        <li>Used for dynamic stat selection in TeamStats page</li>
                    </ul>
                </div>

                <div style="background: rgba(30, 41, 59, 0.6); padding: 1.5rem; border-radius: 10px; margin: 1rem 0;">
                    <h4 style="color: #06b6d4;">3. update_metadata (Data Refresh Tracking)</h4>
                    <p style="color: #94a3b8; font-size: 0.9rem;">Tracks last data refresh timestamps</p>
                    <ul style="color: #cbd5e1; font-size: 0.95rem;">
                        <li>Records when ESPN API was last queried</li>
                        <li>Prevents excessive API calls</li>
                        <li>Ensures data freshness</li>
                    </ul>
                </div>

                <h3>📈 Current Data Status</h3>
                <ul>
                    <li>✅ <strong>32 NFL Teams:</strong> Complete 2025 season data</li>
                    <li>✅ <strong>Week 6 Standings:</strong> Ravens 1-5, Bills 4-2, Chiefs 3-3</li>
                    <li>✅ <strong>Win/Loss Records:</strong> All teams current</li>
                    <li>✅ <strong>Points Stats:</strong> PPG and PA for all 32 teams</li>
                    <li>✅ <strong>JSONB Stats:</strong> Flexible storage for additional metrics</li>
                </ul>

                <h3>🔗 Database Connection Code</h3>
                <pre><code>import psycopg2
from db_config import DATABASE_CONFIG

def get_db_connection():
    return psycopg2.connect(**DATABASE_CONFIG)

# Query all teams
cursor = conn.cursor()
cursor.execute("SELECT * FROM teams ORDER BY name")
teams = cursor.fetchall()

# Result: 32 NFL teams with complete data</code></pre>

                <h3>💡 Design Philosophy</h3>
                <div style="background: rgba(59, 130, 246, 0.1); padding: 1.5rem; border-radius: 10px; border-left: 4px solid #3b82f6; margin: 1rem 0;">
                    <p style="color: #cbd5e1;"><strong>Keep It Simple, Keep It Working</strong></p>
                    <ul style="color: #94a3b8; font-size: 0.95rem;">
                        <li>✅ <strong>Single Source of Truth:</strong> One teams table with all essential data</li>
                        <li>✅ <strong>JSONB Flexibility:</strong> Additional stats stored as JSON without schema changes</li>
                        <li>✅ <strong>Fast Queries:</strong> Simple structure = faster API responses</li>
                        <li>✅ <strong>Easy Maintenance:</strong> Minimal tables = easier to manage and backup</li>
                        <li>✅ <strong>Scalable:</strong> Can add tables as needed (games, injuries, etc.) in future</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Analytics Tab -->
        <div id="analytics" class="tab-content">
            <div class="card">
                <h2>� Real-Time NFL Analytics</h2>
                <p style="color: #94a3b8; margin-bottom: 1.5rem;">
                    Live statistics from your PostgreSQL database, updated every 30 seconds.
                </p>
                
                <h3>🏆 AFC vs NFC Conference Stats</h3>
                <div class="chart-container">
                    <canvas id="conference-chart"></canvas>
                </div>

                <h3>🏈 Division Breakdown</h3>
                <div class="chart-container">
                    <canvas id="division-chart"></canvas>
                </div>

                <h3>� Top Teams by Points Per Game</h3>
                <div id="top-teams-list" style="background: rgba(15, 23, 42, 0.6); padding: 1rem; border-radius: 10px; margin-top: 1rem;">
                    <ul style="list-style: none; padding: 0;">
                        <li style="padding: 0.5rem; background: rgba(59, 130, 246, 0.1); margin: 0.5rem 0; border-radius: 5px;">
                            Loading top teams...
                        </li>
                    </ul>
                </div>

                <h3>📈 Live Data Features</h3>
                <ul style="color: #cbd5e1;">
                    <li>✅ Auto-refreshes every 30 seconds</li>
                    <li>✅ Shows current season standings</li>
                    <li>✅ Real ESPN API data</li>
                    <li>✅ Conference & division breakdowns</li>
                    <li>✅ Points per game rankings</li>
                </ul>
            </div>
        </div>

        <!-- GitHub Tab -->
        <div id="github" class="tab-content">
            <div class="card">
                <h2>🔗 GitHub Repository</h2>
                <p><strong>Repository:</strong> <a href="https://github.com/AprilV/H.C.-Lombardo-App" target="_blank" style="color: #3b82f6;">AprilV/H.C.-Lombardo-App</a></p>
                
                <h3>� Latest Commits (October 14, 2025)</h3>
                <div style="background: rgba(15, 23, 42, 0.6); padding: 1.5rem; border-radius: 10px; margin: 1rem 0;">
                    <div style="border-left: 4px solid #10b981; padding-left: 1rem; margin-bottom: 1rem;">
                        <p style="color: #10b981;"><strong>Commit f1c8820</strong> - Update Dr. Foster documentation</p>
                        <p style="font-size: 0.9rem; color: #94a3b8;">• Created week5-pwa-conversion.md (919 lines)<br>
                        • Updated README.md with PWA features<br>
                        • Added comprehensive technical documentation</p>
                    </div>
                    <div style="border-left: 4px solid #3b82f6; padding-left: 1rem;">
                        <p style="color: #3b82f6;"><strong>Commit 0b5f428</strong> - PWA Complete: Local assets, dual startup modes</p>
                        <p style="font-size: 0.9rem; color: #94a3b8;">• 250 files changed, 71,265 insertions<br>
                        • PWA manifest and routing<br>
                        • All 34 logos (1.69 MB) stored locally<br>
                        • START-DEV.bat + START.bat dual modes<br>
                        • AFC/NFC theming<br>
                        • ESPN API fix<br>
                        • Flask production configuration</p>
                    </div>
                </div>

                <h3>📁 Current Project Structure</h3>
                <pre><code>H.C Lombardo App/
├── START-DEV.bat                # Development mode launcher
├── START.bat                    # Production mode launcher
├── STOP.bat                     # Shutdown script
├── STARTUP_MODES.md             # Complete startup guide
├── api_server.py                # Flask REST API + static serving
├── db_config.py                 # PostgreSQL connection
├── espn_data_fetcher.py         # ESPN API (fixed endpoint)
├── download_team_logos.py       # Asset download utility
├── frontend/                    # React PWA application
│   ├── public/
│   │   ├── manifest.json        # PWA configuration
│   │   └── images/              # Local assets (1.69 MB)
│   │       ├── afc.png          # 49 KB
│   │       ├── nfc.png          # 2.8 KB
│   │       └── teams/           # 32 team logos (1.6 MB)
│   ├── src/
│   │   ├── App.js               # Main router
│   │   ├── Homepage.js          # NFL standings (sorted)
│   │   ├── TeamStats.js         # Detailed stats
│   │   └── SideMenu.js          # Navigation drawer
│   └── package.json             # React dependencies
├── dr.foster/                   # Assignment documentation
│   ├── README.md                # Overview
│   ├── week1-2.md               # ML & SQLite
│   ├── weeks2-4.md              # React & PostgreSQL
│   ├── week5-pwa-conversion.md  # PWA (NEW!)
│   └── index.html               # This dashboard
├── docs/                        # Technical documentation
├── testbed/                     # Development/testing
├── backups/                     # Automated backups
│   └── backup_20251014_233507/  # Latest backup
└── logs/                        # Application logs</code></pre>

                <h3>🚀 Quick Start Commands</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 1rem 0;">
                    <div style="background: rgba(220, 38, 38, 0.15); padding: 1.25rem; border-radius: 8px; border-left: 4px solid #dc2626;">
                        <h4 style="color: #dc2626; margin-top: 0;">Development Mode</h4>
                        <pre><code>cd "C:\IS330\H.C Lombardo App"
START-DEV.bat

# Access:
# React: http://localhost:3000
# API: http://localhost:5000</code></pre>
                    </div>
                    <div style="background: rgba(16, 185, 129, 0.15); padding: 1.25rem; border-radius: 8px; border-left: 4px solid #10b981;">
                        <h4 style="color: #10b981; margin-top: 0;">Production Mode</h4>
                        <pre><code>cd "C:\IS330\H.C Lombardo App"
START.bat

# Access:
# Everything: http://localhost:5000</code></pre>
                    </div>
                </div>

                <h3>📦 New Installation Instructions</h3>
                <ol>
                    <li><strong>Clone Repository:</strong>
                        <pre><code>git clone https://github.com/AprilV/H.C.-Lombardo-App.git
cd "H.C Lombardo App"</code></pre>
                    </li>
                    <li><strong>Install Python Dependencies:</strong>
                        <pre><code>pip install flask flask-cors psycopg2 pandas numpy requests beautifulsoup4</code></pre>
                    </li>
                    <li><strong>Install React Dependencies:</strong>
                        <pre><code>cd frontend
npm install
cd ..</code></pre>
                    </li>
                    <li><strong>Configure PostgreSQL Database:</strong>
                        <pre><code>python nfl_database_loader.py  # Loads all 32 NFL teams</code></pre>
                    </li>
                    <li><strong>Start the Application:</strong>
                        <pre><code># Development mode (hot reload):
START-DEV.bat

# OR Production mode (optimized):
START.bat</code></pre>
                    </li>
                </ol>

                <h3>📈 Repository Statistics</h3>
                <ul>
                    <li><strong>Total Commits:</strong> 50+ (2 major commits on Oct 14)</li>
                    <li><strong>Lines of Code:</strong> 71,265+ insertions</li>
                    <li><strong>Files:</strong> 250+</li>
                    <li><strong>Components:</strong> 3 React components</li>
                    <li><strong>Assets:</strong> 34 images (1.69 MB)</li>
                    <li><strong>Documentation:</strong> 5 major markdown files</li>
                </ul>

                <h3>🔄 Backup System</h3>
                <p>Automated backups created before major changes:</p>
                <ul>
                    <li><strong>Latest:</strong> backups/backup_20251014_233507/</li>
                    <li><strong>Method:</strong> robocopy with selective exclusion</li>
                    <li><strong>Excludes:</strong> node_modules, __pycache__, logs, .git</li>
                    <li><strong>Purpose:</strong> Safety net for experiments and rollbacks</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Tab Switching - Define in global scope
        window.showTab = function(tabName, evt) {
            // Hide all tabs
            const allTabContents = document.querySelectorAll('.tab-content');
            allTabContents.forEach(tab => {
                tab.classList.remove('active');
            });
            
            const allTabs = document.querySelectorAll('.tab');
            allTabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            const selectedContent = document.getElementById(tabName);
            if (selectedContent) {
                selectedContent.classList.add('active');
            } else {
                console.error('Tab content not found:', tabName);
            }
            
            // Activate the clicked tab button
            if (evt && evt.currentTarget) {
                evt.currentTarget.classList.add('active');
            } else {
                // Fallback: find and activate the tab button by matching tabName
                allTabs.forEach(tab => {
                    const onclick = tab.getAttribute('onclick');
                    if (onclick && onclick.includes("'" + tabName + "'")) {
                        tab.classList.add('active');
                    }
                });
            }

            // Initialize 3D scene if architecture tab
            if (tabName === 'architecture') {
                init3DArchitecture();
            }

            // Initialize charts if analytics tab
            if (tabName === 'analytics') {
                initCharts();
            }

            // Initialize database chart if database tab
            if (tabName === 'database') {
                initDatabaseChart();
            }
        };

        // ============================================
        // AUTO-UPDATING DASHBOARD SYSTEM
        // ============================================
        
        const API_BASE_URL = 'http://localhost:5000';
        let isLiveMode = false;
        let autoRefreshInterval = null;
        let lastUpdateTime = null;
        let refreshCountdown = 30; // seconds

        // Static fallback data
        const staticData = {
            stats: {
                current_week: 6,
                total_teams: 32,
                conferences: 2,
                divisions: 8,
                last_update: "Static Demo Data"
            },
            database: {
                total_tables: 3,
                total_columns: 18,
                total_records: 32,
                tables: [
                    { name: "teams", columns: 11, records: 32 },
                    { name: "stats_metadata", columns: 4, records: 0 },
                    { name: "update_metadata", columns: 3, records: 0 }
                ]
            },
            analytics: {
                conferences: [
                    { name: "AFC", teams: 16, wins: 0, losses: 0, avg_ppg: 22.5 },
                    { name: "NFC", teams: 16, wins: 0, losses: 0, avg_ppg: 21.8 }
                ],
                divisions: [],
                top_teams: []
            },
            github: {
                commits: [
                    { sha: "2a9116b", message: "Fix database accuracy", author: "AprilV", date: "2025-10-14" }
                ]
            },
            status: {
                overall: "static",
                database: { status: "unknown", message: "API offline" },
                api: { status: "offline", message: "Not connected" }
            }
        };

        // Fetch data from all dashboard endpoints
        async function fetchAllDashboardData() {
            const endpoints = ['stats', 'database', 'analytics', 'github', 'status'];
            const data = { ...staticData };
            let anySuccess = false;

            console.log('🔄 Fetching dashboard data...');

            for (const endpoint of endpoints) {
                try {
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 5000);
                    
                    const response = await fetch(`${API_BASE_URL}/api/dashboard/${endpoint}`, {
                        signal: controller.signal,
                        mode: 'cors'
                    });
                    
                    clearTimeout(timeoutId);
                    
                    if (response.ok) {
                        const result = await response.json();
                        if (result.success && result.data) {
                            data[endpoint] = result.data;
                            anySuccess = true;
                            console.log(`✅ ${endpoint} data loaded`);
                        }
                    }
                } catch (error) {
                    console.log(`⚠️ ${endpoint} offline, using static data`);
                }
            }

            isLiveMode = anySuccess;
            lastUpdateTime = new Date();
            updateStatusIndicator();
            
            return data;
        }

        // Update all dashboard components
        async function updateDashboard() {
            const data = await fetchAllDashboardData();
            
            // Update Overview tab
            updateOverviewTab(data.stats, data.status);
            
            // Update Database tab
            updateDatabaseTab(data.database);
            
            // Update Analytics tab
            updateAnalyticsTab(data.analytics);
            
            // Update GitHub tab
            updateGitHubTab(data.github);
            
            console.log('📊 Dashboard updated successfully');
        }

        // Update Overview Tab
        function updateOverviewTab(stats, status) {
            const weekEl = document.getElementById('current-week');
            const teamsEl = document.getElementById('total-teams');
            const lastUpdateEl = document.getElementById('last-update');
            
            if (weekEl) weekEl.textContent = `Week ${stats.current_week}`;
            if (teamsEl) teamsEl.textContent = `${stats.total_teams} Teams`;
            if (lastUpdateEl) {
                const updateTime = stats.last_update ? new Date(stats.last_update).toLocaleString() : 'Demo Data';
                lastUpdateEl.textContent = updateTime;
            }
            
            // Update status indicators
            const dbStatusEl = document.getElementById('db-status');
            const apiStatusEl = document.getElementById('api-status');
            
            if (dbStatusEl) {
                const isOnline = status.database.status === 'online';
                dbStatusEl.innerHTML = isOnline ? 
                    '🟢 <strong>Database:</strong> Connected' : 
                    '🔴 <strong>Database:</strong> Offline';
                dbStatusEl.style.color = isOnline ? '#10b981' : '#ef4444';
            }
            
            if (apiStatusEl) {
                const isOnline = status.api.status === 'online';
                apiStatusEl.innerHTML = isOnline ? 
                    '🟢 <strong>API:</strong> Running' : 
                    '🔴 <strong>API:</strong> Offline';
                apiStatusEl.style.color = isOnline ? '#10b981' : '#ef4444';
            }
        }

        // Update Database Tab
        function updateDatabaseTab(database) {
            const tablesCountEl = document.getElementById('tables-count');
            const columnsCountEl = document.getElementById('columns-count');
            const recordsCountEl = document.getElementById('records-count');
            
            if (tablesCountEl) tablesCountEl.textContent = database.total_tables;
            if (columnsCountEl) columnsCountEl.textContent = database.total_columns;
            if (recordsCountEl) recordsCountEl.textContent = database.total_records;
            
            // Update database chart
            if (window.databaseChart) {
                window.databaseChart.data.labels = database.tables.map(t => t.name);
                window.databaseChart.data.datasets[0].data = database.tables.map(t => t.columns);
                window.databaseChart.update('none'); // No animation for live updates
            }
        }

        // Update Analytics Tab
        function updateAnalyticsTab(analytics) {
            // Update conference chart
            if (window.conferenceChart && analytics.conferences.length > 0) {
                window.conferenceChart.data.labels = analytics.conferences.map(c => c.name);
                window.conferenceChart.data.datasets[0].data = analytics.conferences.map(c => c.teams);
                window.conferenceChart.update('none');
            }
            
            // Update division chart  
            if (window.divisionChart && analytics.divisions.length > 0) {
                window.divisionChart.data.labels = analytics.divisions.map(d => d.division);
                window.divisionChart.data.datasets[0].data = analytics.divisions.map(d => d.teams);
                window.divisionChart.update('none');
            }
            
            // Update top teams list
            const topTeamsEl = document.getElementById('top-teams-list');
            if (topTeamsEl && analytics.top_teams.length > 0) {
                topTeamsEl.innerHTML = analytics.top_teams.map((team, index) => `
                    <li style="padding: 0.5rem; background: rgba(59, 130, 246, 0.1); margin: 0.5rem 0; border-radius: 5px;">
                        <strong>${index + 1}. ${team.name}</strong> (${team.abbreviation})<br>
                        Record: ${team.wins}-${team.losses} | PPG: ${team.ppg}
                    </li>
                `).join('');
            }
        }

        // Update GitHub Tab
        function updateGitHubTab(github) {
            const commitsEl = document.getElementById('latest-commits');
            if (commitsEl && github.commits.length > 0) {
                commitsEl.innerHTML = github.commits.map(commit => `
                    <div style="border-left: 4px solid #10b981; padding-left: 1rem; margin-bottom: 1rem;">
                        <p style="color: #10b981;"><strong>Commit ${commit.sha}</strong> - ${commit.message}</p>
                        <p style="font-size: 0.85rem; color: #94a3b8;">
                            ${commit.author} • ${new Date(commit.date).toLocaleString()}
                        </p>
                    </div>
                `).join('');
            }
        }

        // Create status indicator
        function createStatusIndicator() {
            const indicator = document.createElement('div');
            indicator.id = 'status-indicator';
            indicator.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                padding: 12px 20px;
                border-radius: 30px;
                font-size: 0.9rem;
                font-weight: 600;
                z-index: 10000;
                backdrop-filter: blur(10px);
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
                transition: all 0.3s ease;
                cursor: pointer;
                display: flex;
                align-items: center;
                gap: 10px;
            `;
            
            indicator.addEventListener('click', showStatusModal);
            document.body.appendChild(indicator);
            
            // Create countdown display
            const countdown = document.createElement('div');
            countdown.id = 'refresh-countdown';
            countdown.style.cssText = `
                position: fixed;
                bottom: 70px;
                right: 20px;
                padding: 8px 16px;
                border-radius: 20px;
                font-size: 0.8rem;
                font-weight: 500;
                z-index: 10000;
                backdrop-filter: blur(10px);
                background: rgba(15, 23, 42, 0.8);
                color: #94a3b8;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
                display: none;
            `;
            document.body.appendChild(countdown);
        }

        // Update status indicator
        function updateStatusIndicator() {
            const indicator = document.getElementById('status-indicator');
            if (!indicator) return;
            
            if (isLiveMode) {
                indicator.innerHTML = `
                    <span style="font-size: 1.2rem;">🟢</span>
                    <span>Live Data</span>
                    <span style="font-size: 0.7rem; opacity: 0.8;">Auto-Refresh</span>
                `;
                indicator.style.background = 'linear-gradient(135deg, rgba(16, 185, 129, 0.95) 0%, rgba(5, 150, 105, 0.95) 100%)';
                indicator.style.color = '#ffffff';
                indicator.style.animation = 'pulse 2s infinite';
                indicator.title = 'Connected to Flask API\nAuto-refresh every 30 seconds\nClick for details';
                
                // Show countdown
                const countdown = document.getElementById('refresh-countdown');
                if (countdown) countdown.style.display = 'block';
            } else {
                indicator.innerHTML = `
                    <span style="font-size: 1.2rem;">📊</span>
                    <span>Static Data</span>
                `;
                indicator.style.background = 'linear-gradient(135deg, rgba(59, 130, 246, 0.95) 0%, rgba(37, 99, 235, 0.95) 100%)';
                indicator.style.color = '#ffffff';
                indicator.style.animation = 'none';
                indicator.title = 'API offline - using demo data\nClick for details';
                
                // Hide countdown
                const countdown = document.getElementById('refresh-countdown');
                if (countdown) countdown.style.display = 'none';
            }
        }

        // Update countdown timer
        function updateCountdown() {
            const countdown = document.getElementById('refresh-countdown');
            if (countdown && isLiveMode) {
                if (refreshCountdown > 0) {
                    countdown.textContent = `Next refresh in ${refreshCountdown}s`;
                    countdown.style.display = 'block';
                    refreshCountdown--;
                } else {
                    countdown.textContent = 'Refreshing...';
                    refreshCountdown = 30;
                }
            }
        }

        // Show status modal
        function showStatusModal() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
                padding: 2rem;
                border-radius: 15px;
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
                z-index: 10001;
                max-width: 500px;
                border: 2px solid ${isLiveMode ? '#10b981' : '#3b82f6'};
                color: #e2e8f0;
            `;
            
            const lastUpdate = lastUpdateTime ? lastUpdateTime.toLocaleTimeString() : 'Never';
            
            modal.innerHTML = `
                <h3 style="margin-top: 0; color: ${isLiveMode ? '#10b981' : '#3b82f6'}; display: flex; align-items: center; gap: 10px;">
                    <span style="font-size: 1.5rem;">${isLiveMode ? '🟢' : '📊'}</span>
                    ${isLiveMode ? 'Live Data Mode' : 'Static Data Mode'}
                </h3>
                
                ${isLiveMode ? `
                    <p><strong>Status:</strong> ✅ Connected to Flask API</p>
                    <p><strong>API Endpoint:</strong> <code style="color: #10b981;">http://localhost:5000</code></p>
                    <p><strong>Data Sources:</strong></p>
                    <ul style="margin: 0.5rem 0;">
                        <li>PostgreSQL Database (live stats)</li>
                        <li>GitHub API (latest commits)</li>
                        <li>ESPN API (team data)</li>
                    </ul>
                    <p><strong>Auto-Refresh:</strong> Every 30 seconds</p>
                    <p><strong>Last Update:</strong> ${lastUpdate}</p>
                    <hr style="border-color: rgba(16, 185, 129, 0.3); margin: 1rem 0;">
                    <p style="font-size: 0.9rem; color: #94a3b8;">
                        All dashboard tabs are pulling real-time data from your Flask API. 
                        Stats update automatically - no manual refresh needed! 🎉
                    </p>
                ` : `
                    <p><strong>Status:</strong> ⚠️ API server offline</p>
                    <p><strong>Data Source:</strong> Static demonstration data</p>
                    <p><strong>Refresh:</strong> Manual only</p>
                    <p><strong>Benefits:</strong> Always accessible, perfect for demos</p>
                    <hr style="border-color: rgba(59, 130, 246, 0.3); margin: 1rem 0;">
                    <p style="font-size: 0.9rem; color: #94a3b8;">
                        Dashboard is using cached data. To enable auto-updates, start your Flask API server:
                    </p>
                    <div style="background: rgba(59, 130, 246, 0.1); padding: 0.75rem; border-radius: 5px; margin-top: 0.75rem; border-left: 3px solid #3b82f6;">
                        <strong>Windows:</strong><br>
                        <code style="color: #3b82f6; font-size: 0.85rem;">START.bat</code> (production)<br>
                        <code style="color: #3b82f6; font-size: 0.85rem;">START-DEV.bat</code> (development)
                    </div>
                `}
                
                <button onclick="this.parentElement.remove(); document.getElementById('modal-overlay').remove();" 
                        style="margin-top: 1.5rem; padding: 0.75rem 1.5rem; background: ${isLiveMode ? '#10b981' : '#3b82f6'}; 
                        border: none; border-radius: 8px; color: white; font-weight: 600; cursor: pointer; width: 100%;">
                    Got it!
                </button>
            `;
            
            // Create overlay
            const overlay = document.createElement('div');
            overlay.id = 'modal-overlay';
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.7);
                z-index: 10000;
                backdrop-filter: blur(5px);
            `;
            overlay.onclick = () => {
                modal.remove();
                overlay.remove();
            };
            
            document.body.appendChild(overlay);
            document.body.appendChild(modal);
        }

        // Start auto-refresh
        function startAutoRefresh() {
            // Initial update
            updateDashboard();
            
            // Auto-refresh every 30 seconds
            if (autoRefreshInterval) clearInterval(autoRefreshInterval);
            autoRefreshInterval = setInterval(() => {
                updateDashboard();
                refreshCountdown = 30;
            }, 30000);
            
            // Countdown timer every second
            setInterval(updateCountdown, 1000);
        }

        // Add CSS animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes pulse {
                0%, 100% { box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4); }
                50% { box-shadow: 0 4px 30px rgba(16, 185, 129, 0.6); }
            }
        `;
        document.head.appendChild(style);

        // Initialize on page load
        window.addEventListener('DOMContentLoaded', () => {
            createStatusIndicator();
            startAutoRefresh();
            console.log('🚀 Auto-updating dashboard initialized');
        });

        // ============================================
        // END AUTO-UPDATE SYSTEM
        // ============================================

            try {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 3000); // 3 second timeout
                
                const response = await fetch(`${API_BASE_URL}/api/teams/count`, {
                    signal: controller.signal,
                    mode: 'cors'
                });
                
                clearTimeout(timeoutId);
                
                if (response.ok) {
                    const data = await response.json();
                    isLiveMode = true;
                    updateDataModeIndicator(true);
                    update3DMonitorColors(true); // Update 3D tower to green
                    return {
                        teams: data.count || staticData.teams,
                        games: staticData.games, // Can add more endpoints
                        predictions: staticData.predictions,
                        accuracy: staticData.accuracy,
                        lastUpdate: new Date().toLocaleString(),
                        databaseTables: staticData.databaseTables
                    };
                } else {
                    throw new Error('API returned non-OK status');
                }
            } catch (error) {
                console.log('📊 API offline - using static data');
                isLiveMode = false;
                updateDataModeIndicator(false);
                update3DMonitorColors(false); // Update 3D tower to red
                return staticData;
            }
        }

        // Update the dashboard with data
        function updateDashboardStats(data) {
            // Update stat cards using IDs
            const teamsStat = document.getElementById('stat-teams');
            const tablesStat = document.getElementById('stat-tables');
            
            if (teamsStat) {
                teamsStat.textContent = data.teams;
            }
            
            if (tablesStat && data.databaseTables) {
                tablesStat.textContent = data.databaseTables + '+';
            }
            
            console.log(`📊 Dashboard updated: ${data.teams} teams tracked`);
        }

        // Create and update data mode indicator
        function updateDataModeIndicator(isLive) {
            let indicator = document.getElementById('data-mode-indicator');
            
            if (!indicator) {
                // Create indicator if it doesn't exist
                indicator = document.createElement('div');
                indicator.id = 'data-mode-indicator';
                indicator.style.cssText = `
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    padding: 10px 18px;
                    border-radius: 25px;
                    font-size: 0.9rem;
                    font-weight: 700;
                    z-index: 10000;
                    backdrop-filter: blur(10px);
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
                    transition: all 0.3s ease;
                    cursor: help;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                `;
                
                // Add click to show more info
                indicator.addEventListener('click', () => {
                    showDataModeInfo(isLive);
                });
                
                document.body.appendChild(indicator);
            }
            
            if (isLive) {
                indicator.innerHTML = `
                    <span style="font-size: 1.2rem;">🟢</span>
                    <span>Live Data</span>
                    <span style="font-size: 0.75rem; opacity: 0.8;">●</span>
                `;
                indicator.style.background = 'linear-gradient(135deg, rgba(16, 185, 129, 0.95) 0%, rgba(5, 150, 105, 0.95) 100%)';
                indicator.style.color = '#ffffff';
                indicator.title = 'Connected to Flask API (Port 5000)\nData refreshes every 5 minutes\nClick for details';
                
                // Add pulsing animation for live mode
                indicator.style.animation = 'pulse 2s infinite';
            } else {
                indicator.innerHTML = `
                    <span style="font-size: 1.2rem;">📊</span>
                    <span>Static Data</span>
                `;
                indicator.style.background = 'linear-gradient(135deg, rgba(59, 130, 246, 0.95) 0%, rgba(37, 99, 235, 0.95) 100%)';
                indicator.style.color = '#ffffff';
                indicator.title = 'Using cached data - API server offline\nPerfect for demos and presentations\nClick for details';
                indicator.style.animation = 'none';
            }
        }

        // Show detailed info modal
        function showDataModeInfo(isLive) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
                padding: 2rem;
                border-radius: 15px;
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
                z-index: 10001;
                max-width: 500px;
                border: 2px solid ${isLive ? '#10b981' : '#3b82f6'};
                color: #e2e8f0;
            `;
            
            modal.innerHTML = `
                <h3 style="margin-top: 0; color: ${isLive ? '#10b981' : '#3b82f6'}; display: flex; align-items: center; gap: 10px;">
                    <span style="font-size: 1.5rem;">${isLive ? '🟢' : '📊'}</span>
                    ${isLive ? 'Live Data Mode' : 'Static Data Mode'}
                </h3>
                
                ${isLive ? `
                    <p><strong>Status:</strong> ✅ Connected to Flask API</p>
                    <p><strong>API Endpoint:</strong> <code style="color: #10b981;">http://localhost:5000</code></p>
                    <p><strong>Data Source:</strong> PostgreSQL Database (Port 5432)</p>
                    <p><strong>Refresh Rate:</strong> Every 5 minutes</p>
                    <p><strong>Last Update:</strong> ${new Date().toLocaleTimeString()}</p>
                    <hr style="border-color: rgba(16, 185, 129, 0.3); margin: 1rem 0;">
                    <p style="font-size: 0.9rem; color: #94a3b8;">
                        Dashboard is pulling real-time data from your PostgreSQL database through the Flask API server. Stats automatically refresh to stay current.
                    </p>
                ` : `
                    <p><strong>Status:</strong> ⚠️ API server offline or unreachable</p>
                    <p><strong>Data Source:</strong> Static fallback values</p>
                    <p><strong>Refresh Rate:</strong> Manual only</p>
                    <p><strong>Mode Benefits:</strong> Always accessible, perfect for demos</p>
                    <hr style="border-color: rgba(59, 130, 246, 0.3); margin: 1rem 0;">
                    <p style="font-size: 0.9rem; color: #94a3b8;">
                        Dashboard is using cached demonstration data. To enable live mode, start your Flask API server on port 5000 and refresh the page.
                    </p>
                    <div style="background: rgba(59, 130, 246, 0.1); padding: 0.75rem; border-radius: 5px; margin-top: 0.75rem; border-left: 3px solid #3b82f6;">
                        <strong>Start API:</strong><br>
                        <code style="color: #3b82f6; font-size: 0.85rem;">python api_server.py</code>
                    </div>
                `}
                
                <button onclick="this.parentElement.remove(); document.getElementById('modal-overlay').remove();" 
                        style="margin-top: 1.5rem; padding: 0.75rem 1.5rem; background: ${isLive ? '#10b981' : '#3b82f6'}; 
                        border: none; border-radius: 8px; color: white; font-weight: 600; cursor: pointer; width: 100%;">
                    Got it!
                </button>
            `;
            
            // Create overlay
            const overlay = document.createElement('div');
            overlay.id = 'modal-overlay';
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.7);
                z-index: 10000;
                backdrop-filter: blur(5px);
            `;
            overlay.onclick = () => {
                modal.remove();
                overlay.remove();
            };
            
            document.body.appendChild(overlay);
            document.body.appendChild(modal);
        }

        // Add CSS animation for pulse effect
        const style = document.createElement('style');
        style.textContent = `
            @keyframes pulse {
                0%, 100% { box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4); }
                50% { box-shadow: 0 4px 30px rgba(16, 185, 129, 0.6); }
            }
        `;
        document.head.appendChild(style);

        // Show data mode modal with connection details
        function showDataModeModal(isLive, message) {
            const modalOverlay = document.createElement('div');
            modalOverlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.7);
                z-index: 20000;
                display: flex;
                justify-content: center;
                align-items: center;
            `;
            
            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: linear-gradient(135deg, #1e3a5f 0%, #2d4a6f 100%);
                padding: 30px;
                border-radius: 15px;
                max-width: 500px;
                color: white;
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            `;
            
            modalContent.innerHTML = `
                <h2 style="margin: 0 0 20px 0; color: ${isLive ? '#10b981' : '#3b82f6'};">
                    ${isLive ? '🟢 Live Data Mode' : '📊 Static Data Mode'}
                </h2>
                <p style="margin: 10px 0; line-height: 1.6;">
                    <strong>Status:</strong> ${isLive ? 'Connected to Flask API' : 'API Server Offline'}<br>
                    <strong>Endpoint:</strong> http://localhost:5000/api/teams/count<br>
                    <strong>Data Source:</strong> ${isLive ? 'PostgreSQL Database (32 teams)' : 'Static Demo Data'}<br>
                    <strong>Last Update:</strong> ${new Date().toLocaleString()}
                </p>
                ${isLive ? 
                    '<p style="color: #10b981; margin: 15px 0;">✅ All systems operational</p>' : 
                    '<p style="color: #f59e0b; margin: 15px 0;">⚠️ Using cached data - Start API server to enable live mode</p>'
                }
                <button onclick="this.parentElement.parentElement.remove()" style="
                    background: ${isLive ? '#10b981' : '#3b82f6'};
                    color: white;
                    border: none;
                    padding: 10px 20px;
                    border-radius: 8px;
                    cursor: pointer;
                    font-weight: 600;
                    margin-top: 15px;
                ">Close</button>
            `;
            
            modalOverlay.appendChild(modalContent);
            modalOverlay.onclick = (e) => {
                if (e.target === modalOverlay) modalOverlay.remove();
            };
            document.body.appendChild(modalOverlay);
        }

        // Update data mode indicator
        function updateDataModeIndicator(isLive, message = '') {
            let indicator = document.getElementById('dataModeIndicator');
            if (!indicator) {
                indicator = document.createElement('div');
                indicator.id = 'dataModeIndicator';
                indicator.style.cssText = `
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    padding: 8px 16px;
                    border-radius: 20px;
                    font-size: 0.85rem;
                    font-weight: 600;
                    z-index: 10000;
                    backdrop-filter: blur(10px);
                    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
                    transition: all 0.3s ease;
                    cursor: pointer;
                `;
                indicator.onclick = () => showDataModeModal(isLive, message);
                document.body.appendChild(indicator);
            }
            
            if (isLive) {
                indicator.innerHTML = '🟢 Live Data';
                indicator.style.background = 'rgba(16, 185, 129, 0.9)';
                indicator.style.color = '#ffffff';
                indicator.title = 'Connected to Flask API (Port 5000)';
            } else {
                indicator.innerHTML = '📊 Static Data';
                indicator.style.background = 'rgba(59, 130, 246, 0.9)';
                indicator.style.color = '#ffffff';
                indicator.title = 'Using cached data - API server offline';
            }
        }

        // Update 3D API Status Tower colors based on live/static mode
        function update3DMonitorColors(isLive) {
            if (!scene) return; // 3D scene not initialized yet
            
            const monitor = scene.getObjectByName('apiStatusMonitor');
            if (!monitor) return; // Monitor not found
            
            // Find the materials to update - MUST update both color AND emissive!
            monitor.traverse((child) => {
                if (child.isMesh) {
                    if (child.name === 'statusLED') {
                        // Update LED sphere - bright colors for visibility
                        if (isLive) {
                            child.material.color.setHex(0x44ff44); // Bright green
                            child.material.emissive.setHex(0x44ff44); // Green glow
                        } else {
                            child.material.color.setHex(0xff4444); // Bright red
                            child.material.emissive.setHex(0xff4444); // Red glow
                        }
                    } else if (child.geometry && child.geometry.type === 'ExtrudeGeometry') {
                        // Update main tower body
                        if (isLive) {
                            child.material.color.setHex(0x50c878); // Professional green
                            child.material.emissive.setHex(0x50c878); // Green glow
                        } else {
                            child.material.color.setHex(0xe63946); // Red/orange
                            child.material.emissive.setHex(0xe63946); // Red glow
                        }
                    }
                } else if (child.isLine && child.name === 'towerLine') {
                    // Update tower edges
                    if (isLive) {
                        child.material.color.setHex(0x8fff8f); // Light green edges
                    } else {
                        child.material.color.setHex(0xff8fa3); // Light red edges
                    }
                }
            });
        }

        // Initialize data loading
        async function initializeDashboard() {
            console.log('🚀 Initializing H.C. Lombardo Dashboard...');
            
            // Load initial data
            const data = await fetchLiveData();
            updateDashboardStats(data);
            
            // Update 3D tower colors
            update3DMonitorColors(isLiveMode);

        // 3D Architecture Visualization
        let scene, camera, renderer, labelRenderer, controls;
        let architectureInitialized = false;

        function init3DArchitecture() {
            if (architectureInitialized) return;
            architectureInitialized = true;

            const container = document.getElementById('canvas-container');
            const canvas = document.getElementById('architecture-canvas');

            // Scene setup - Packet Tracer style professional network
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x2b2d42); // Packet Tracer dark background
            // No fog - clean network diagram

            // Camera - Packet Tracer style wide view for many devices
            camera = new THREE.PerspectiveCamera(65, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.set(0, 50, 40); // Much higher for network overview
            camera.lookAt(0, 0, 0);

            // WebGL Renderer setup
            renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            renderer.setPixelRatio(window.devicePixelRatio);

            // CSS2D Label Renderer
            labelRenderer = new THREE.CSS2DRenderer();
            labelRenderer.setSize(container.clientWidth, container.clientHeight);
            labelRenderer.domElement.style.position = 'absolute';
            labelRenderer.domElement.style.top = '0';
            labelRenderer.domElement.style.pointerEvents = 'none';
            container.appendChild(labelRenderer.domElement);

            // Controls - Full interactivity with room for 100s of devices
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.screenSpacePanning = false;
            controls.minDistance = 10; // Can zoom in close
            controls.maxDistance = 120; // Can zoom out very far
            controls.target.set(0, 0, 0); // Center of network
            controls.maxPolarAngle = Math.PI * 0.55; // Mostly top-down
            controls.minPolarAngle = Math.PI * 0.15;
            controls.update();

            // Lights - Packet Tracer style professional lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);

            // Main light from above
            const mainLight = new THREE.DirectionalLight(0xffffff, 0.7);
            mainLight.position.set(0, 40, 20);
            scene.add(mainLight);

            // Fill lights (cool professional tones)
            const fillLight1 = new THREE.PointLight(0x4a90e2, 0.4, 100); // Professional blue
            fillLight1.position.set(20, 15, 20);
            scene.add(fillLight1);

            const fillLight2 = new THREE.PointLight(0x50c878, 0.4, 100); // Professional green
            fillLight2.position.set(-20, 15, -20);
            scene.add(fillLight2);

            // Grid floor - Packet Tracer style (large for many devices)
            const gridHelper = new THREE.GridHelper(150, 75, 0x3a3d5c, 0x3a3d5c);
            gridHelper.material.opacity = 0.4;
            gridHelper.material.transparent = true;
            scene.add(gridHelper);

            // Create 3D Architecture
            createArchitecture();

            // Setup hover interactions
            setupHoverInteractions();

            // Animation loop - Professional subtle pulsing
            let animationTime = 0;
            function animate() {
                requestAnimationFrame(animate);
                animationTime += 0.015; // Slightly slower for professional look
                
                // Subtle pulsing glow on all objects (professional but cool)
                scene.traverse((object) => {
                    if (object.userData && object.userData.material && object.userData.pulsePhase !== undefined) {
                        const pulse = Math.sin(animationTime + object.userData.pulsePhase) * 0.25 + 0.75; // More subtle range
                        object.userData.material.emissiveIntensity = pulse;
                    }
                });
                
                controls.update();
                renderer.render(scene, camera);
                labelRenderer.render(scene, camera);
            }
            animate();
            
            // Apply initial color state based on current live mode
            // This ensures the tower colors match the current API connection status
            setTimeout(() => {
                update3DMonitorColors(isLiveMode);
            }, 100);

            // Handle window resize
            window.addEventListener('resize', () => {
                const newWidth = container.clientWidth;
                const newHeight = container.clientHeight;
                
                camera.aspect = newWidth / newHeight;
                camera.updateProjectionMatrix();
                
                renderer.setSize(newWidth, newHeight);
                labelRenderer.setSize(newWidth, newHeight);
                
                // Keep centered on resize
                controls.update();
            });
        }

        function createArchitecture() {
            // Tier 1: Frontend (React) - Top - React logo inspired hexagon (smaller for network diagram)
            const frontendShape = new THREE.Shape();
            const radius = 3; // Reduced from 4.5 for Packet Tracer scale
            for (let i = 0; i < 6; i++) {
                const angle = (Math.PI / 3) * i;
                const x = radius * Math.cos(angle);
                const y = radius * Math.sin(angle);
                if (i === 0) frontendShape.moveTo(x, y);
                else frontendShape.lineTo(x, y);
            }
            frontendShape.lineTo(radius, 0);
            
            const extrudeSettings = { depth: 1.5, bevelEnabled: true, bevelThickness: 0.2, bevelSize: 0.15, bevelSegments: 2 };
            const frontendGeometry = new THREE.ExtrudeGeometry(frontendShape, extrudeSettings);
            const frontendMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x4a90e2, // Professional blue (Packet Tracer client device)
                emissive: 0x4a90e2, 
                emissiveIntensity: 0.6,
                shininess: 100,
                transparent: true,
                opacity: 0.95
            });
            const frontend = new THREE.Mesh(frontendGeometry, frontendMaterial);
            frontend.position.set(-35, 2, -15); // Spread out for 100s of devices
            frontend.rotation.x = Math.PI / 2;
            scene.add(frontend);
            
            // Add pulsing animation
            frontend.userData.pulsePhase = 0;
            frontend.userData.material = frontendMaterial;

            // Add edges for better definition
            const frontendEdges = new THREE.EdgesGeometry(frontendGeometry);
            const frontendLine = new THREE.LineSegments(frontendEdges, new THREE.LineBasicMaterial({ color: 0x6bb6ff, linewidth: 2 }));
            frontend.add(frontendLine);

            // Add label
            addLabel('React<br><small>Port 3000</small>', frontend, 'label-frontend');

            // Store metadata for hover
            frontend.userData = {
                name: 'React Frontend',
                tier: 'Tier 1: Presentation Layer',
                port: '3000 (Development)',
                technology: 'React 18.2 with Functional Components',
                features: [
                    'Real-time data display with live updates',
                    'Responsive design (mobile & desktop)',
                    'Interactive data tables with sorting',
                    'Chart.js visualizations',
                    'RESTful API integration'
                ],
                communication: 'Sends HTTP requests to Flask API (Port 5000)',
                files: 'frontend/src/App.js, frontend/src/components/',
                dependencies: 'react, react-dom, axios, chart.js'
            };

            // Tier 2: Backend (Flask) - Middle - Professional server rack (smaller)
            const backendGroup = new THREE.Group();
            
            // Main server body
            const serverBody = new THREE.BoxGeometry(5, 3, 3); // Reduced from 8x5x4.5
            const backendMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x5a6c7d, // Professional gray (Packet Tracer server)
                emissive: 0x5a6c7d, 
                emissiveIntensity: 0.5,
                shininess: 80
            });
            const backend = new THREE.Mesh(serverBody, backendMaterial);
            backendGroup.add(backend);
            
            // Add pulsing animation
            backendGroup.userData.pulsePhase = Math.PI / 3;
            backendGroup.userData.material = backendMaterial;

            // Server rack details (horizontal lines)
            for (let i = -1.2; i <= 1.2; i += 0.6) {
                const rackLine = new THREE.Mesh(
                    new THREE.BoxGeometry(4.8, 0.1, 3.1),
                    new THREE.MeshPhongMaterial({ color: 0x3d4856, emissive: 0x3d4856, emissiveIntensity: 0.3 })
                );
                rackLine.position.y = i;
                backendGroup.add(rackLine);
            }

            // LED indicators (professional green)
            for (let i = 0; i < 3; i++) {
                const led = new THREE.Mesh(
                    new THREE.BoxGeometry(0.2, 0.2, 0.2),
                    new THREE.MeshPhongMaterial({ 
                        color: 0x50c878, // Professional green
                        emissive: 0x50c878, 
                        emissiveIntensity: 0.8 
                    })
                );
                led.position.set(-1.5 + i * 1.5, 1.4, 1.6);
                backendGroup.add(led);
            }

            const backendEdges = new THREE.EdgesGeometry(serverBody);
            const backendLine = new THREE.LineSegments(backendEdges, new THREE.LineBasicMaterial({ color: 0x7a8c9e, linewidth: 2 }));
            backendGroup.add(backendLine);

            backendGroup.position.set(0, 2, 0); // Center hub
            scene.add(backendGroup);

            addLabel('Flask API<br><small>Port 5000</small>', backendGroup, 'label-backend');

            // Store metadata for hover
            backendGroup.userData = {
                name: 'Flask API Server',
                tier: 'Tier 2: Application Layer',
                port: '5000 (DHCP Managed)',
                technology: 'Python Flask 3.0 + Flask-CORS',
                features: [
                    'RESTful API endpoints (/api/teams, /api/games)',
                    'DHCP port management (5000-5009)',
                    'Comprehensive logging system',
                    'PostgreSQL database integration',
                    'ESPN API data fetching & caching'
                ],
                communication: 'Receives requests from React, queries PostgreSQL & ESPN API',
                files: 'api_server_v2.py, db_config.py, espn_data_fetcher.py',
                dependencies: 'flask, flask-cors, psycopg2, requests'
            };

            // Tier 3: Database (PostgreSQL) - Bottom Left - Classic cylinder database (smaller)
            const dbGroup = new THREE.Group();
            
            // Database cylinder (stacked disks)
            const cylinderGeometry = new THREE.CylinderGeometry(2.2, 2.2, 3.5, 32); // Reduced from 3.5x5
            const dbMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x2a9d8f, // Professional teal (Packet Tracer database)
                emissive: 0x2a9d8f, 
                emissiveIntensity: 0.6,
                shininess: 100
            });
            const cylinder = new THREE.Mesh(cylinderGeometry, dbMaterial);
            dbGroup.add(cylinder);
            
            // Add pulsing animation
            dbGroup.userData.pulsePhase = Math.PI * 2 / 3;
            dbGroup.userData.material = dbMaterial;

            // Disk separators
            for (let i = -1.3; i <= 1.3; i += 1.3) {
                const disk = new THREE.Mesh(
                    new THREE.CylinderGeometry(2.4, 2.4, 0.15, 32),
                    new THREE.MeshPhongMaterial({ color: 0x1e7a6e, emissive: 0x1e7a6e, emissiveIntensity: 0.3 })
                );
                disk.position.y = i;
                dbGroup.add(disk);
            }

            const dbEdges = new THREE.EdgesGeometry(cylinderGeometry);
            const dbLine = new THREE.LineSegments(dbEdges, new THREE.LineBasicMaterial({ color: 0x4db8a8, linewidth: 2 }));
            dbGroup.add(dbLine);

            dbGroup.position.set(-35, 2, 15); // Bottom left corner
            scene.add(dbGroup);

            addLabel('PostgreSQL<br><small>Port 5432</small>', dbGroup, 'label-database');

            // Store metadata for hover
            dbGroup.userData = {
                name: 'PostgreSQL 18 Database',
                tier: 'Tier 3: Data Layer',
                port: '5432 (Standard PostgreSQL)',
                technology: 'PostgreSQL 18.0 on Windows x64',
                features: [
                    'Stores 32 NFL teams with full statistics',
                    'Game schedules & live scores',
                    'Historical betting data',
                    'Optimized indexes for fast queries',
                    'Automated backups & migrations'
                ],
                communication: 'Responds to SQL queries from Flask API',
                schema: 'teams, games, update_metadata tables',
                credentials: 'User: postgres, Database: nfl_analytics'
            };

            // External API (ESPN) - Bottom Right - Cloud/Server hybrid
            const apiGroup = new THREE.Group();
            
            // Main body
            const apiBody = new THREE.SphereGeometry(3, 32, 32);
            const apiMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x7fb3d5, // Professional light blue (Packet Tracer cloud)
                emissive: 0x7fb3d5, 
                emissiveIntensity: 0.5,
                shininess: 100,
                transparent: true,
                opacity: 0.9
            });
            const apiSphere = new THREE.Mesh(apiBody, apiMaterial);
            apiGroup.add(apiSphere);
            
            // Add pulsing animation
            apiGroup.userData.pulsePhase = Math.PI;
            apiGroup.userData.material = apiMaterial;

            // Cloud puffs (smaller spheres)
            const puffPositions = [
                [-2.2, 0.6, 0], [2.2, 0.6, 0], [0, 0.6, 2.2], [0, 0.6, -2.2],
                [-1.6, -0.6, 1.6], [1.6, -0.6, 1.6], [-1.6, -0.6, -1.6], [1.6, -0.6, -1.6]
            ];
            
            puffPositions.forEach(pos => {
                const puff = new THREE.Mesh(
                    new THREE.SphereGeometry(1, 16, 16), // Smaller for network diagram
                    new THREE.MeshPhongMaterial({ 
                        color: 0x5a9ec2, 
                        emissive: 0x5a9ec2, 
                        emissiveIntensity: 0.2,
                        transparent: true,
                        opacity: 0.7
                    })
                );
                puff.position.set(pos[0], pos[1], pos[2]);
                apiGroup.add(puff);
            });

            apiGroup.position.set(35, 2, 15); // Bottom right corner - spread out
            scene.add(apiGroup);

            addLabel('ESPN API<br><small>External</small>', apiGroup, 'label-api');

            // Store metadata for hover
            apiGroup.userData = {
                name: 'ESPN API',
                tier: 'External Data Source',
                port: 'HTTPS (443)',
                technology: 'ESPN Public API v3',
                features: [
                    'Live NFL game scores & updates',
                    'Team standings & rankings',
                    'Player statistics',
                    'Real-time score updates',
                    'Schedule information'
                ],
                communication: 'Flask API fetches data via HTTP requests',
                endpoints: 'espn.com/apis/v3/sports/football/nfl/',
                refresh: 'Cached data refreshed every 15 minutes'
            };

            // Tier 5: Data Monitor (Hybrid System) - Top Center - Monitoring tower/antenna
            const monitorGroup = new THREE.Group();
            
            // Main monitoring tower body (octagonal prism)
            const towerShape = new THREE.Shape();
            const towerRadius = 2.5;
            for (let i = 0; i < 8; i++) {
                const angle = (Math.PI / 4) * i;
                const x = towerRadius * Math.cos(angle);
                const y = towerRadius * Math.sin(angle);
                if (i === 0) towerShape.moveTo(x, y);
                else towerShape.lineTo(x, y);
            }
            towerShape.lineTo(towerRadius, 0);
            
            const towerExtrudeSettings = { depth: 4, bevelEnabled: false };
            const towerGeometry = new THREE.ExtrudeGeometry(towerShape, towerExtrudeSettings);
            const monitorMaterial = new THREE.MeshPhongMaterial({ 
                color: 0xe63946, // Professional red/orange (monitoring system)
                emissive: 0xe63946, 
                emissiveIntensity: 0.7,
                shininess: 100,
                transparent: true,
                opacity: 0.95
            });
            const tower = new THREE.Mesh(towerGeometry, monitorMaterial);
            tower.rotation.x = Math.PI / 2;
            monitorGroup.add(tower);
            
            // Add pulsing animation
            monitorGroup.userData.pulsePhase = Math.PI * 4 / 3;
            monitorGroup.userData.material = monitorMaterial;

            // Antenna/sensor rings (spinning rings at top)
            for (let i = 0; i < 3; i++) {
                const ring = new THREE.Mesh(
                    new THREE.TorusGeometry(1.8 - i * 0.5, 0.15, 8, 16),
                    new THREE.MeshPhongMaterial({ 
                        color: 0xff6b6b, 
                        emissive: 0xff6b6b, 
                        emissiveIntensity: 0.5 
                    })
                );
                ring.position.y = 2.5 + i * 0.4;
                ring.rotation.x = Math.PI / 2;
                monitorGroup.add(ring);
            }

            // Status LED indicator (glowing sphere at top)
            const statusLED = new THREE.Mesh(
                new THREE.SphereGeometry(0.5, 16, 16),
                new THREE.MeshPhongMaterial({ 
                    color: 0xff4444, // Red for offline (will change to green when live)
                    emissive: 0xff4444, 
                    emissiveIntensity: 1.0 
                })
            );
            statusLED.position.y = 4.5;
            statusLED.name = 'statusLED'; // Name it so we can find it later
            monitorGroup.add(statusLED);

            // Tower edges for definition
            const towerEdges = new THREE.EdgesGeometry(towerGeometry);
            const towerLine = new THREE.LineSegments(towerEdges, new THREE.LineBasicMaterial({ color: 0xff8fa3, linewidth: 2 }));
            towerLine.name = 'towerLine';
            monitorGroup.add(towerLine);

            monitorGroup.position.set(35, 2, -15); // Top right corner
            monitorGroup.name = 'apiStatusMonitor'; // Name it so we can find it later
            scene.add(monitorGroup);

            addLabel('API Status<br><small>Uptime Monitor</small>', monitorGroup, 'label-monitor');

            // Store metadata for hover
            monitorGroup.userData = {
                name: 'API Status Monitor',
                tier: 'Monitoring & Observability',
                port: 'N/A (Monitoring Service)',
                technology: 'JavaScript Fetch API with Timeout',
                features: [
                    'Auto-detects API availability (3s timeout)',
                    'Seamless fallback to static data',
                    'Visual status indicator (green=live, red=static)',
                    'Auto-refresh every 5 minutes in live mode',
                    'Clickable status badge with detailed info'
                ],
                communication: 'Monitors Flask API health via periodic checks',
                modes: 'Live Mode (connects to API) | Static Mode (cached fallback data)',
                indicator: 'Bottom-right floating badge shows current status'
            };

            // Bidirectional Connection Lines and Data Flow (Packet Tracer colors)
            createBidirectionalConnection(frontend.position, backendGroup.position, 0x4a90e2, 0x5a6c7d); // Blue to Gray
            createBidirectionalConnection(backendGroup.position, dbGroup.position, 0x5a6c7d, 0x2a9d8f); // Gray to Teal
            createBidirectionalConnection(backendGroup.position, apiGroup.position, 0x5a6c7d, 0x7fb3d5); // Gray to Light Blue
            createBidirectionalConnection(monitorGroup.position, backendGroup.position, 0xe63946, 0x5a6c7d); // Red to Gray (monitoring connection)
        }

        function createBidirectionalConnection(start, end, color1, color2) {
            // Professional connection lines - clean but visible
            const points = [start.clone(), end.clone()];
            const geometry = new THREE.BufferGeometry().setFromPoints(points);
            
            // Main clean line
            const mainLine = new THREE.Line(
                geometry, 
                new THREE.LineBasicMaterial({ 
                    color: color1, 
                    opacity: 0.7, 
                    transparent: true, 
                    linewidth: 2 
                })
            );
            scene.add(mainLine);
            
            // Subtle glowing tube for depth
            const direction = new THREE.Vector3().subVectors(end, start);
            const length = direction.length();
            const tubeGeometry = new THREE.CylinderGeometry(0.18, 0.18, length, 8);
            const tubeMaterial = new THREE.MeshBasicMaterial({ 
                color: color1, 
                transparent: true, 
                opacity: 0.5 // Slightly more visible since we removed emissive
            });
            const tube = new THREE.Mesh(tubeGeometry, tubeMaterial);
            
            // Position and rotate the tube to connect start and end
            tube.position.copy(start).add(end).multiplyScalar(0.5);
            tube.quaternion.setFromUnitVectors(
                new THREE.Vector3(0, 1, 0), 
                direction.normalize()
            );
            tube.userData.pulsePhase = Math.random() * Math.PI * 2;
            tube.userData.material = tubeMaterial;
            scene.add(tube);

            // Animated particles in both directions - MORE PARTICLES!
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    createDataFlowParticle(start, end, color1, 1.5); // Forward direction
                    createDataFlowParticle(end, start, color2, 1.5); // Reverse direction
                }, i * 500);
            }
        }

        function createDataFlowParticle(start, end, color, speed) {
            const geometry = new THREE.SphereGeometry(0.35, 16, 16); // Slightly smaller
            const material = new THREE.MeshPhongMaterial({ 
                color: color, 
                emissive: color, 
                emissiveIntensity: 1.2, // More subtle glow
                transparent: true,
                opacity: 0.9
            });
            const particle = new THREE.Mesh(geometry, material);
            
            // Subtle glowing trail
            const glowGeometry = new THREE.SphereGeometry(0.6, 16, 16);
            const glowMaterial = new THREE.MeshBasicMaterial({ 
                color: color, 
                transparent: true, 
                opacity: 0.3 // More subtle
            });
            const glow = new THREE.Mesh(glowGeometry, glowMaterial);
            particle.add(glow);
            
            particle.userData.start = start.clone();
            particle.userData.end = end.clone();
            particle.userData.progress = Math.random(); // Random start position
            particle.userData.speed = speed;
            
            scene.add(particle);

            // Animate particle
            function animateParticle() {
                particle.userData.progress += 0.01 * particle.userData.speed;
                if (particle.userData.progress > 1) {
                    particle.userData.progress = 0;
                }
                
                particle.position.lerpVectors(
                    particle.userData.start, 
                    particle.userData.end, 
                    particle.userData.progress
                );
                
                // Pulse effect
                const scale = 1 + Math.sin(particle.userData.progress * Math.PI) * 0.3;
                particle.scale.set(scale, scale, scale);
                
                requestAnimationFrame(animateParticle);
            }
            animateParticle();
        }

            function addLabel(text, mesh, className) {
                const labelDiv = document.createElement('div');
                labelDiv.className = 'label-3d ' + className;
                labelDiv.innerHTML = text;
                
                const label = new THREE.CSS2DObject(labelDiv);
                label.position.set(6, 0, 0); // Position to the right of the object, not on top
                mesh.add(label);
            }        function setupHoverInteractions() {
            const raycaster = new THREE.Raycaster();
            const mouse = new THREE.Vector2();
            const tooltip = document.getElementById('hover-tooltip');
            const canvas = document.getElementById('architecture-canvas');

            // Get all interactive objects
            const interactiveObjects = [];
            scene.traverse((object) => {
                if (object.userData && object.userData.name) {
                    interactiveObjects.push(object);
                }
            });

            canvas.addEventListener('mousemove', (event) => {
                const rect = canvas.getBoundingClientRect();
                mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
                mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;

                raycaster.setFromCamera(mouse, camera);
                const intersects = raycaster.intersectObjects(interactiveObjects, true);

                if (intersects.length > 0) {
                    // Find the parent object with userData
                    let targetObject = intersects[0].object;
                    while (targetObject && !targetObject.userData.name) {
                        targetObject = targetObject.parent;
                    }

                    if (targetObject && targetObject.userData.name) {
                        const data = targetObject.userData;
                        
                        // Build tooltip content
                        let content = `<h3>${data.name}</h3>`;
                        content += `<div class="detail-row"><span class="detail-label">Tier:</span><span class="detail-value">${data.tier}</span></div>`;
                        content += `<div class="detail-row"><span class="detail-label">Port:</span><span class="detail-value">${data.port}</span></div>`;
                        content += `<div class="detail-row"><span class="detail-label">Technology:</span><span class="detail-value">${data.technology}</span></div>`;
                        
                        if (data.features) {
                            content += `<div style="margin-top: 10px;"><strong>Features:</strong></div>`;
                            content += '<ul style="margin: 5px 0; padding-left: 20px;">';
                            data.features.forEach(f => content += `<li style="margin: 3px 0;">${f}</li>`);
                            content += '</ul>';
                        }
                        
                        content += `<div class="detail-row" style="margin-top: 8px;"><span class="detail-label">Data Flow:</span><span class="detail-value">${data.communication}</span></div>`;
                        
                        if (data.files) {
                            content += `<div class="detail-row"><span class="detail-label">Files:</span><span class="detail-value">${data.files}</span></div>`;
                        }
                        if (data.schema) {
                            content += `<div class="detail-row"><span class="detail-label">Schema:</span><span class="detail-value">${data.schema}</span></div>`;
                        }
                        if (data.endpoints) {
                            content += `<div class="detail-row"><span class="detail-label">Endpoints:</span><span class="detail-value">${data.endpoints}</span></div>`;
                        }
                        
                        tooltip.innerHTML = content;
                        tooltip.style.display = 'block';
                        tooltip.style.left = event.clientX + 'px';
                        tooltip.style.top = event.clientY + 'px';
                        
                        canvas.style.cursor = 'pointer';
                    }
                } else {
                    tooltip.style.display = 'none';
                    canvas.style.cursor = 'default';
                }
            });

            canvas.addEventListener('mouseleave', () => {
                tooltip.style.display = 'none';
                canvas.style.cursor = 'default';
            });
        }

        // Chart Initialization
        function initCharts() {
            // Performance Chart
            const perfCtx = document.getElementById('performance-chart');
            if (!perfCtx) return;

            new Chart(perfCtx, {
                type: 'bar',
                data: {
                    labels: ['Training', 'Validation', 'Test'],
                    datasets: [{
                        label: 'Accuracy (%)',
                        data: [87, 85, 84],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.6)',
                            'rgba(139, 92, 246, 0.6)',
                            'rgba(6, 182, 212, 0.6)'
                        ],
                        borderColor: [
                            'rgba(59, 130, 246, 1)',
                            'rgba(139, 92, 246, 1)',
                            'rgba(6, 182, 212, 1)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#e2e8f0' }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: { color: '#94a3b8' },
                            grid: { color: 'rgba(148, 163, 184, 0.1)' }
                        },
                        x: {
                            ticks: { color: '#94a3b8' },
                            grid: { color: 'rgba(148, 163, 184, 0.1)' }
                        }
                    }
                }
            });

            // Division Chart
            const divCtx = document.getElementById('division-chart');
            if (!divCtx) return;

            new Chart(divCtx, {
                type: 'doughnut',
                data: {
                    labels: ['AFC East', 'AFC North', 'AFC South', 'AFC West', 'NFC East', 'NFC North', 'NFC South', 'NFC West'],
                    datasets: [{
                        data: [4, 4, 4, 4, 4, 4, 4, 4],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.8)',
                            'rgba(139, 92, 246, 0.8)',
                            'rgba(6, 182, 212, 0.8)',
                            'rgba(16, 185, 129, 0.8)',
                            'rgba(59, 130, 246, 0.6)',
                            'rgba(139, 92, 246, 0.6)',
                            'rgba(6, 182, 212, 0.6)',
                            'rgba(16, 185, 129, 0.6)'
                        ],
                        borderColor: 'rgba(15, 23, 42, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: { color: '#e2e8f0' }
                        }
                    }
                }
            });
        }

        function initDatabaseChart() {
            const ctx = document.getElementById('schema-chart');
            if (!ctx) return;

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['teams', 'stats_metadata', 'update_metadata'],
                    datasets: [{
                        label: 'Number of Columns',
                        data: [11, 4, 3],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.6)',   // Blue for teams
                            'rgba(139, 92, 246, 0.6)',   // Purple for stats_metadata
                            'rgba(6, 182, 212, 0.6)'     // Cyan for update_metadata
                        ],
                        borderColor: [
                            'rgba(59, 130, 246, 1)',
                            'rgba(139, 92, 246, 1)',
                            'rgba(6, 182, 212, 1)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#e2e8f0' }
                        },
                        title: {
                            display: true,
                            text: 'PostgreSQL Database Schema - 3 Tables, 18 Total Columns',
                            color: '#e2e8f0',
                            font: { size: 14 }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { 
                                color: '#94a3b8',
                                stepSize: 2
                            },
                            grid: { color: 'rgba(148, 163, 184, 0.1)' },
                            title: {
                                display: true,
                                text: 'Number of Columns',
                                color: '#cbd5e1'
                            }
                        },
                        x: {
                            ticks: { color: '#94a3b8' },
                            grid: { color: 'rgba(148, 163, 184, 0.1)' },
                            title: {
                                display: true,
                                text: 'Table Name',
                                color: '#cbd5e1'
                            }
                        }
                    }
                }
            });
        }

        // Update current date and time in header
        function updateDateTime() {
            const now = new Date();
            
            // Format date: October 10, 2025
            const dateOptions = { year: 'numeric', month: 'long', day: 'numeric' };
            const dateString = now.toLocaleDateString('en-US', dateOptions);
            
            // Format time: 3:45:12 PM
            const timeOptions = { hour: 'numeric', minute: '2-digit', second: '2-digit', hour12: true };
            const timeString = now.toLocaleTimeString('en-US', timeOptions);
            
            // Update the DOM
            document.getElementById('currentDate').textContent = dateString;
            document.getElementById('currentTime').textContent = timeString;
        }

        // Update immediately on load
        updateDateTime();
        
        // Update time every second
        setInterval(updateDateTime, 1000);
    </script>
</body>
</html>